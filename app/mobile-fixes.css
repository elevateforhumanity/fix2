/* Mobile-First Responsive Fixes */

/* Ensure proper viewport on mobile */
@media (max-width: 768px) {
  /* Prevent horizontal scroll */
  html,
  body {
    overflow-x: hidden;
    width: 100%;
    max-width: 100vw;
  }

  /* Fix container widths and padding */
  .container,
  .max-w-7xl,
  .max-w-6xl,
  .max-w-5xl {
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }

  /* Reduce section padding on mobile */
  section {
    padding-top: 2rem !important;
    padding-bottom: 2rem !important;
  }

  /* Fix gaps between sections */
  section + section {
    margin-top: 0 !important;
  }

  /* Responsive text sizes */
  h1 {
    font-size: 1.875rem !important;
    line-height: 1.2;
    margin-bottom: 1rem !important;
  }

  h2 {
    font-size: 1.5rem !important;
    line-height: 1.3;
    margin-bottom: 0.75rem !important;
  }

  h3 {
    font-size: 1.25rem !important;
    margin-bottom: 0.5rem !important;
  }

  p {
    font-size: 1rem !important;
    line-height: 1.5;
    margin-bottom: 1rem !important;
  }

  /* Fix images - proper sizing */
  img {
    max-width: 100%;
    height: auto;
    display: block;
  }

  /* Next.js Image component */
  .relative img {
    object-fit: cover;
  }

  /* Video players - Mobile optimized */
  video {
    width: 100% !important;
    height: auto !important;
    max-width: 100% !important;
    display: block !important;
    object-fit: cover !important;
  }

  /* Hero video height on mobile */
  section video {
    min-height: 300px !important;
  }

  /* Image containers - proper aspect ratios */
  .relative {
    width: 100%;
  }

  /* Fix image heights on mobile */
  [class*="h-96"],
  [class*="h-[400px]"] {
    height: 250px !important;
  }

  [class*="h-64"] {
    height: 200px !important;
  }

  [class*="h-40"] {
    height: 150px !important;
  }

  /* Grid layouts - single column on mobile */
  [class*='grid-cols-2'],
  [class*='grid-cols-3'],
  [class*='md:grid-cols'] {
    grid-template-columns: 1fr !important;
    gap: 1rem !important;
  }

  /* Flex gaps - reduce on mobile */
  [class*='gap-8'] {
    gap: 1rem !important;
  }

  [class*='gap-6'] {
    gap: 0.75rem !important;
  }

  /* Padding reductions */
  [class*='py-12'],
  [class*='py-16'] {
    padding-top: 2rem !important;
    padding-bottom: 2rem !important;
  }

  [class*='px-8'] {
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }

  /* Fix aspect-video on mobile */
  .aspect-video {
    position: relative !important;
    width: 100% !important;
    padding-bottom: 56.25% !important; /* 16:9 */
    height: 0 !important;
  }

  .aspect-video video {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
  }

  iframe[src*='youtube'],
  iframe[src*='vimeo'],
  iframe[src*='video'] {
    width: 100%;
    height: auto;
    aspect-ratio: 16 / 9;
    max-width: 100%;
  }

  /* Video containers */
  .video-container,
  .video-wrapper,
  [class*='video'] {
    position: relative;
    width: 100%;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
    height: 0;
    overflow: hidden;
  }

  .video-container iframe,
  .video-container video,
  .video-wrapper iframe,
  .video-wrapper video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  /* Video controls - Larger for touch */
  video::-webkit-media-controls-panel {
    padding: 12px;
  }

  video::-webkit-media-controls-play-button,
  video::-webkit-media-controls-pause-button {
    width: 44px;
    height: 44px;
  }

  /* Fix grid layouts */
  .grid {
    grid-template-columns: 1fr !important;
  }

  /* Fix buttons - ensure minimum touch target size (WCAG 2.5.5) */
  button,
  .btn,
  a.btn,
  [role='button'] {
    min-height: 44px;
    min-width: 44px;
    padding: 12px 20px;
    text-align: center;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    border-radius: 8px;
    font-weight: 600;
    transition: all 0.2s ease;
  }

  /* Touch feedback */
  button:active,
  .btn:active,
  a.btn:active {
    transform: scale(0.98);
    opacity: 0.9;
  }

  /* Touch-friendly links */
  a {
    min-height: 44px;
    display: inline-flex;
    align-items: center;
    padding: 8px 4px;
  }

  /* Navigation links */
  nav a {
    min-height: 48px;
    padding: 12px 16px;
    display: flex;
    align-items: center;
  }

  /* Icon buttons */
  button[aria-label],
  .icon-button {
    min-width: 48px;
    min-height: 48px;
    padding: 12px;
  }

  /* CTA buttons - Extra prominent */
  .cta-button,
  [class*='cta'],
  button[type='submit'] {
    min-height: 52px;
    font-size: 18px;
    padding: 14px 24px;
    font-weight: 700;
  }

  /* Spacing between touch targets */
  button + button,
  a.btn + a.btn {
    margin-left: 12px;
  }

  .flex.gap-2 {
    gap: 12px !important;
  }

  .flex.gap-3 {
    gap: 16px !important;
  }

  .flex.gap-4 {
    gap: 20px !important;
  }

  /* Fix navigation */
  nav {
    padding: 0.5rem 1rem;
  }

  /* Fix hero sections */
  .hero,
  [class*='hero'] {
    padding: 2rem 1rem;
    min-height: auto;
  }

  /* Fix cards */
  .card,
  [class*='card'] {
    margin-bottom: 1rem;
  }

  /* Fix forms - Enhanced for mobile */
  input,
  select,
  textarea {
    width: 100%;
    font-size: 16px; /* Prevents zoom on iOS */
    min-height: 44px;
    padding: 12px 16px;
    border-radius: 8px;
    -webkit-appearance: none;
    appearance: none;
  }

  /* Form labels */
  label {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 8px;
    display: block;
  }

  /* Form groups */
  .form-group,
  .space-y-4 > div {
    margin-bottom: 20px;
  }

  /* Submit buttons */
  button[type='submit'],
  input[type='submit'] {
    width: 100%;
    min-height: 48px;
    font-size: 16px;
    font-weight: 700;
    border-radius: 8px;
    margin-top: 16px;
  }

  /* Checkbox and radio */
  input[type='checkbox'],
  input[type='radio'] {
    min-width: 20px;
    min-height: 20px;
    margin-right: 12px;
  }

  /* Error messages */
  .error-message,
  [class*='error'] {
    font-size: 14px;
    margin-top: 4px;
    display: block;
  }

  /* Form validation */
  input:invalid,
  select:invalid,
  textarea:invalid {
    border-color: #ef4444;
  }

  input:valid,
  select:valid,
  textarea:valid {
    border-color: #10b981;
  }

  /* Fix tables */
  table {
    display: block;
    overflow-x: auto;
    white-space: nowrap;
  }

  /* Fix modals */
  .modal,
  [role='dialog'] {
    width: 95vw;
    max-width: 95vw;
    margin: 1rem auto;
  }

  /* Fix sticky elements - but keep header sticky */
  .sticky:not(header),
  .fixed:not(header) {
    position: relative;
  }

  /* Improve touch targets */
  a,
  button,
  input,
  select {
    min-height: 44px;
    min-width: 44px;
  }

  /* Fix flex layouts */
  .flex {
    flex-wrap: wrap;
  }

  /* Hide desktop-only elements */
  .hidden-mobile,
  .desktop-only {
    display: none !important;
  }

  /* Show mobile-only elements */
  .mobile-only {
    display: block !important;
  }

  /* Fix spacing */
  .py-16 {
    padding-top: 3rem;
    padding-bottom: 3rem;
  }

  .py-20 {
    padding-top: 4rem;
    padding-bottom: 4rem;
  }

  /* Fix testimonial cards */
  .testimonial-card {
    flex-direction: column;
  }

  .testimonial-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
  }
}

/* Prevent zoom on input focus (iOS) */
@media (max-width: 768px) {
  input[type='text'],
  input[type='email'],
  input[type='tel'],
  input[type='number'],
  input[type='password'],
  select,
  textarea {
    font-size: 16px !important;
  }
}

/* Small mobile devices */
@media (max-width: 480px) {
  h1 {
    font-size: 1.75rem !important;
  }

  h2 {
    font-size: 1.5rem !important;
  }

  h3 {
    font-size: 1.25rem !important;
  }

  /* Smaller padding on tiny screens */
  .container {
    padding-left: 0.75rem;
    padding-right: 0.75rem;
  }
}

/* Tablet adjustments */
@media (min-width: 769px) and (max-width: 1024px) {
  .grid-cols-2 {
    grid-template-columns: repeat(2, 1fr);
  }

  .grid-cols-3 {
    grid-template-columns: repeat(2, 1fr);
  }

  .grid-cols-4 {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Fix specific components */
@media (max-width: 768px) {
  /* Hero component */
  .hero-content {
    text-align: center;
  }

  .hero-buttons {
    flex-direction: column;
    gap: 1rem;
  }

  .hero-buttons a,
  .hero-buttons button {
    width: 100%;
  }

  /* Stats section */
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
  }

  /* Feature cards */
  .feature-grid {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  /* Testimonials */
  .testimonial-grid {
    grid-template-columns: 1fr;
  }

  /* Footer */
  .footer-grid {
    grid-template-columns: 1fr;
    text-align: center;
  }

  /* Navigation */
  .desktop-nav {
    display: none;
  }

  .mobile-nav {
    display: block;
  }

  /* Header fixes */
  header {
    position: sticky !important;
    top: 0 !important;
    z-index: 50 !important;
  }

  /* Utility bar mobile fixes - prevent text wrapping */
  header .bg-gray-900 {
    overflow: hidden;
  }

  header .bg-gray-900 .flex {
    flex-wrap: nowrap !important;
  }

  /* Hide utility bar text on very small screens, show icons only */
  @media (max-width: 640px) {
    header .bg-gray-900 span {
      display: none !important;
    }

    header .bg-gray-900 a,
    header .bg-gray-900 button {
      padding: 0.25rem 0.5rem;
      white-space: nowrap;
    }

    /* Make icons more prominent when text is hidden */
    header .bg-gray-900 svg {
      width: 1rem !important;
      height: 1rem !important;
    }

    /* Ensure Apply button stays visible and readable */
    header .bg-gray-900 .bg-blue-600 {
      font-size: 0.75rem;
      padding: 0.25rem 0.75rem;
    }
  }

  /* Prevent utility bar from getting too tall */
  header .h-10 {
    min-height: 2.5rem;
    max-height: 2.5rem;
    overflow: hidden;
  }

  /* Safe area for notched devices */
  .safe-area-inset {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 1rem);
  }
}

/* Landscape mobile */
@media (max-width: 896px) and (orientation: landscape) {
  .hero {
    min-height: auto;
    padding: 2rem 1rem;
  }
}

/* Print styles */
@media print {
  .no-print,
  nav,
  footer,
  .mobile-nav {
    display: none !important;
  }
}
