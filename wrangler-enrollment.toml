# Cloudflare Worker: Enrollment Injector
# This worker intercepts ALL traffic to elevateforhumanity.org at the DNS/CDN level
# Autopilot: Fully autonomous deployment via GitHub Actions

name = "enrollment-injector"
main = "workers/enrollment-injector-worker.ts"
compatibility_date = "2024-01-01"

# Account ID (your Cloudflare account)
account_id = "ebd4dda1304d9f951e834139182b2aa1"

# CRITICAL: Route configuration
# This tells Cloudflare to route ALL traffic through this worker
# NOTE: Routes commented out for initial deployment - will be enabled after worker is live
# routes = [
#   { pattern = "elevateforhumanity.org/*", zone_name = "elevateforhumanity.org" },
#   { pattern = "www.elevateforhumanity.org/*", zone_name = "elevateforhumanity.org" }
# ]

# Deploy without routes - domain not on Cloudflare
# Domain elevateforhumanity.org is hosted on Durable.co
# Worker will be accessible via direct URL only
workers_dev = false

# Environment variables
[vars]
ENVIRONMENT = "production"
INJECTION_ENABLED = "true"

# Development environment
[env.development]
name = "enrollment-injector-dev"
vars = { ENVIRONMENT = "development", INJECTION_ENABLED = "true" }

# Production environment
[env.production]
name = "enrollment-injector"
vars = { ENVIRONMENT = "production", INJECTION_ENABLED = "true" }
