# Cloudflare Worker: Enrollment Injector
# This worker intercepts ALL traffic to elevateforhumanity.org at the DNS/CDN level
# Autopilot: Fully autonomous deployment via GitHub Actions

name = "enrollment-injector"
main = "workers/enrollment-injector-worker.ts"
compatibility_date = "2024-01-01"

# Account ID (your Cloudflare account)
account_id = "6ba1d2a52a3fa230972960db307ac7c0"

# CRITICAL: Route configuration
# This tells Cloudflare to route ALL traffic through this worker
routes = [
  { pattern = "elevateforhumanity.org/*", zone_name = "elevateforhumanity.org" },
  { pattern = "www.elevateforhumanity.org/*", zone_name = "elevateforhumanity.org" }
]

# Alternative: Use workers.dev subdomain for testing
# workers_dev = true

# Environment variables
[vars]
ENVIRONMENT = "production"
INJECTION_ENABLED = "true"

# Development environment
[env.development]
name = "enrollment-injector-dev"
vars = { ENVIRONMENT = "development", INJECTION_ENABLED = "true" }

# Production environment
[env.production]
name = "enrollment-injector"
vars = { ENVIRONMENT = "production", INJECTION_ENABLED = "true" }
