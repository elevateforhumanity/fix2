{
  "task_id": "run-course-migrations-NOW",
  "status": "ACTIVE",
  "priority": "HIGH",
  "assigned_to": "WORKER_AVAILABLE",
  "created_at": "2025-11-19T19:45:00Z",
  "deadline": "IMMEDIATE",
  "blocking": false,
  "task_type": "database_migration",
  
  "title": "ðŸš€ Run Database Migrations to Activate 17 Courses",
  
  "context": {
    "problem": "Courses configured in code but database is empty",
    "impact": "Website shows mock data instead of real courses",
    "solution": "Run SQL migrations in Supabase to create 17 courses + 16 programs",
    "estimated_time": "5 minutes"
  },
  
  "worker_instructions": {
    "quick_guide": "RUN_MIGRATIONS_NOW.md",
    "detailed_guide": "ACTIVATE_COURSES_NOW.md",
    "start_here": "Open Supabase SQL Editor and run migration file"
  },
  
  "required_access": [
    "Supabase dashboard access to: cuxzzpsyufcewtmicszk",
    "SQL Editor permissions"
  ],
  
  "steps_summary": [
    "1. Open Supabase SQL Editor",
    "2. Copy migration SQL from GitHub",
    "3. Paste and run in SQL Editor",
    "4. Verify 17 courses created",
    "5. Check website - blue banner should disappear"
  ],
  
  "urls": {
    "supabase_sql_editor": "https://app.supabase.com/project/cuxzzpsyufcewtmicszk/sql/new",
    "migration_file_github": "https://raw.githubusercontent.com/elevateforhumanity/fix2/main/supabase/COMPLETE_MIGRATION.sql",
    "migration_file_local": "supabase/COMPLETE_MIGRATION.sql",
    "verify_website": "https://fix2-gpql-r0x49ne29-elevate-48e460c9.vercel.app/admin/courses",
    "production_site": "https://www.elevateforhumanity.org/admin/courses"
  },
  
  "migration_details": {
    "file": "supabase/COMPLETE_MIGRATION.sql",
    "size": "13KB",
    "creates": {
      "programs": 16,
      "courses": 17,
      "modules": "50+"
    },
    "execution_time": "30 seconds"
  },
  
  "step_by_step": [
    {
      "step": 1,
      "action": "Open Supabase SQL Editor",
      "url": "https://app.supabase.com/project/cuxzzpsyufcewtmicszk/sql/new",
      "instructions": "Click 'New query' button if not already on new query page"
    },
    {
      "step": 2,
      "action": "Get Migration SQL",
      "method": "Option A: GitHub Raw",
      "url": "https://raw.githubusercontent.com/elevateforhumanity/fix2/main/supabase/COMPLETE_MIGRATION.sql",
      "instructions": [
        "Open the GitHub raw URL",
        "Press Ctrl+A (select all)",
        "Press Ctrl+C (copy)"
      ],
      "alternative": "Option B: Local file - Open supabase/COMPLETE_MIGRATION.sql and copy all"
    },
    {
      "step": 3,
      "action": "Paste SQL into Editor",
      "instructions": [
        "Go back to Supabase SQL Editor",
        "Click in the editor area",
        "Press Ctrl+V (paste)",
        "Verify SQL appears (should be ~484 lines)"
      ]
    },
    {
      "step": 4,
      "action": "Run Migration",
      "instructions": [
        "Click 'Run' button (or press Ctrl+Enter)",
        "Wait 30 seconds",
        "Look for success messages",
        "Should see: 'âœ… Programs created/updated'"
      ]
    },
    {
      "step": 5,
      "action": "Verify Data Created",
      "verification_queries": [
        "SELECT COUNT(*) FROM programs; -- Should return 16",
        "SELECT COUNT(*) FROM courses; -- Should return 17",
        "SELECT COUNT(*) FROM modules; -- Should return 50+",
        "SELECT slug, title FROM courses ORDER BY title;"
      ],
      "instructions": "Run each query to verify data was created"
    },
    {
      "step": 6,
      "action": "Verify Website",
      "url": "https://fix2-gpql-r0x49ne29-elevate-48e460c9.vercel.app/admin/courses",
      "expected_results": [
        "NO blue banner (should disappear)",
        "Shows '17 courses in the system'",
        "All 17 course cards visible",
        "Can click on courses to view details"
      ],
      "note": "May need to wait 1-2 minutes for Vercel to pick up changes"
    }
  ],
  
  "success_criteria": {
    "database": {
      "programs_count": 16,
      "courses_count": 17,
      "modules_count": "50+",
      "no_errors": true
    },
    "website": {
      "blue_banner_removed": true,
      "courses_visible": 17,
      "can_view_details": true,
      "can_enroll": true
    }
  },
  
  "verification_checklist": [
    "[ ] Opened Supabase SQL Editor",
    "[ ] Copied migration SQL",
    "[ ] Pasted into editor",
    "[ ] Clicked 'Run' button",
    "[ ] Saw success messages",
    "[ ] Verified programs count = 16",
    "[ ] Verified courses count = 17",
    "[ ] Visited website",
    "[ ] Blue banner is GONE",
    "[ ] 17 courses visible",
    "[ ] Took screenshot of success"
  ],
  
  "troubleshooting": {
    "error_relation_not_exist": {
      "problem": "Tables don't exist yet",
      "solution": "Run base schema first - see ACTIVATE_COURSES_NOW.md Step 4",
      "sql": "CREATE TABLE programs (...); CREATE TABLE courses (...); CREATE TABLE modules (...);"
    },
    "error_duplicate_key": {
      "problem": "Migration already run",
      "solution": "This is OK! Data already exists. Skip to verification step."
    },
    "blue_banner_still_shows": {
      "problem": "Website not updated yet",
      "solutions": [
        "Wait 2-3 minutes for cache to clear",
        "Hard refresh browser (Ctrl+Shift+R)",
        "Check Vercel deployment completed",
        "Verify NEXT_PUBLIC_SUPABASE_URL is set in Vercel"
      ]
    },
    "no_courses_showing": {
      "problem": "Migration didn't run or failed",
      "solution": "Check SQL Editor for error messages, verify queries show data"
    }
  },
  
  "completion_report": {
    "required_info": [
      "Migration execution time",
      "Programs created count",
      "Courses created count",
      "Modules created count",
      "Website verification status",
      "Blue banner removed: yes/no",
      "Any errors encountered"
    ],
    "screenshots": [
      "Supabase SQL Editor showing success",
      "Verification queries showing counts",
      "Website showing 17 courses (no blue banner)"
    ],
    "report_to": "Project lead"
  },
  
  "security_notes": [
    "âœ… Migration is read-only safe (INSERT with ON CONFLICT)",
    "âœ… No data deletion",
    "âœ… Can be run multiple times safely",
    "âœ… Uses service_role key (already configured in Vercel)"
  ],
  
  "what_this_creates": {
    "programs": [
      "Business Start-Up & Marketing (32 hrs)",
      "HVAC Technician (600 hrs)",
      "Medical Assistant (720 hrs)",
      "Barber Apprenticeship (1,500 hrs)",
      "Direct Support Professional (120 hrs)",
      "Professional Esthetician (700 hrs)",
      "Tax Preparation (80 hrs)",
      "Reentry Specialist (160 hrs)",
      "Beauty Educator (240 hrs)",
      "Peer Support Professional (80 hrs)",
      "Peer Recovery Coach (80 hrs)",
      "CPR Certification (8 hrs)",
      "Community Healthcare Worker (160 hrs)",
      "Emergency Health & Safety (40 hrs)",
      "NRF Rise Up (40 hrs)",
      "JRI Complete Series (120 hrs)"
    ],
    "courses": [
      "All 16 programs above PLUS",
      "Rise Up Certificate (40 hrs)"
    ],
    "total_training_hours": "5,000+"
  },
  
  "activation": {
    "status": "ACTIVE",
    "worker_notification": "IMMEDIATE",
    "escalation": "If not completed in 1 hour, escalate",
    "blocking_other_tasks": false,
    "can_run_parallel": true
  },
  
  "estimated_timeline": {
    "step_1_open_editor": "30 seconds",
    "step_2_copy_sql": "30 seconds",
    "step_3_paste": "10 seconds",
    "step_4_run": "30 seconds",
    "step_5_verify_db": "1 minute",
    "step_6_verify_web": "1 minute",
    "total": "4-5 minutes"
  },
  
  "priority_justification": "Courses are configured and deployed, just need database activation to go live. High visibility feature for stakeholders."
}
