{
  "task_id": "add-secrets-NOW",
  "status": "ACTIVE",
  "priority": "CRITICAL",
  "assigned_to": "WORKER_AVAILABLE",
  "created_at": "2024-01-15T21:00:00Z",
  "deadline": "IMMEDIATE",
  "blocking": true,
  "task_type": "deployment_fix",
  
  "title": "üö® URGENT: Add Environment Variables to Fix Deployment",
  
  "context": {
    "problem": "Netlify deployment failing with: Missing Supabase environment variables for admin client",
    "impact": "Site cannot deploy - BLOCKING PRODUCTION LAUNCH",
    "solution": "Add 6 environment variables to Netlify",
    "estimated_time": "5-10 minutes"
  },
  
  "worker_instructions": {
    "quick_guide": "WORKER_TASK_ADD_SECRETS.md",
    "detailed_guide": ".autopilot/tasks/secure-add-secrets.json",
    "start_here": "Read WORKER_TASK_ADD_SECRETS.md first"
  },
  
  "required_access": [
    "GitHub admin access to: elevateforhumanity/fix2",
    "Netlify access to site: 12f120ab-3f63-419b-bc49-430f043415c1",
    "Supabase dashboard access to: cuxzzpsyufcewtmicszk"
  ],
  
  "steps_summary": [
    "1. Get 3 keys from Supabase dashboard",
    "2. Add 3 secrets to GitHub",
    "3. Add 6 variables to Netlify",
    "4. Trigger Netlify deployment",
    "5. Verify site is live"
  ],
  
  "urls": {
    "supabase_keys": "https://supabase.com/dashboard/project/cuxzzpsyufcewtmicszk/settings/api",
    "github_secrets": "https://github.com/elevateforhumanity/fix2/settings/secrets/actions",
    "netlify_env": "https://app.netlify.com/sites/12f120ab-3f63-419b-bc49-430f043415c1/settings/env",
    "netlify_deploys": "https://app.netlify.com/sites/12f120ab-3f63-419b-bc49-430f043415c1/deploys",
    "verify_site": "https://elevateforhumanity.org"
  },
  
  "variables_to_add": {
    "github_secrets": [
      {
        "name": "NEXT_PUBLIC_SUPABASE_URL",
        "source": "Supabase dashboard - Project URL",
        "example": "https://cuxzzpsyufcewtmicszk.supabase.co"
      },
      {
        "name": "NEXT_PUBLIC_SUPABASE_ANON_KEY",
        "source": "Supabase dashboard - anon public key",
        "example": "eyJhbGci... (long string)"
      },
      {
        "name": "SUPABASE_SERVICE_ROLE_KEY",
        "source": "Supabase dashboard - service_role key",
        "example": "eyJhbGci... (different long string)",
        "security": "SENSITIVE - Admin access key"
      }
    ],
    "netlify_variables": [
      {
        "name": "NEXT_PUBLIC_SUPABASE_URL",
        "value": "Same as GitHub secret",
        "scope": "All scopes"
      },
      {
        "name": "NEXT_PUBLIC_SUPABASE_ANON_KEY",
        "value": "Same as GitHub secret",
        "scope": "All scopes"
      },
      {
        "name": "SUPABASE_SERVICE_ROLE_KEY",
        "value": "Same as GitHub secret",
        "scope": "All scopes"
      },
      {
        "name": "NEXT_PUBLIC_APP_URL",
        "value": "https://elevateforhumanity.org",
        "scope": "Production"
      },
      {
        "name": "NEXT_PUBLIC_SITE_URL",
        "value": "https://elevateforhumanity.org",
        "scope": "Production"
      },
      {
        "name": "NODE_ENV",
        "value": "production",
        "scope": "Production"
      }
    ]
  },
  
  "success_criteria": {
    "github": "3 secrets visible in GitHub Secrets list",
    "netlify": "6 variables visible in Netlify Environment Variables",
    "deployment": "Netlify deployment status shows 'Published'",
    "site": "https://elevateforhumanity.org loads without errors",
    "verification": [
      "Site homepage loads",
      "https://elevateforhumanity.org/sitemap.xml accessible",
      "https://elevateforhumanity.org/robots.txt accessible",
      "No errors in browser console"
    ]
  },
  
  "completion_report": {
    "required_screenshots": [
      "GitHub Secrets page showing 3 secrets added",
      "Netlify Environment Variables showing 6 variables",
      "Netlify deployment showing 'Published' status",
      "Site loading at elevateforhumanity.org"
    ],
    "report_to": "Project lead",
    "include": [
      "Time taken",
      "Any issues encountered",
      "Deployment ID from Netlify",
      "Confirmation site is live"
    ]
  },
  
  "troubleshooting": {
    "no_github_access": "Contact repository owner for admin access",
    "no_netlify_access": "Contact Netlify account owner for site access",
    "build_still_fails": "Verify all 6 variables are added with exact names (case-sensitive)",
    "site_404": "Wait 5-10 minutes for DNS propagation, clear browser cache"
  },
  
  "security_notes": [
    "‚ö†Ô∏è service_role key has full database admin access",
    "‚ö†Ô∏è Never commit keys to git repository",
    "‚ö†Ô∏è Never share keys in public channels",
    "‚úÖ Keys are encrypted in GitHub Secrets",
    "‚úÖ Keys are encrypted in Netlify",
    "‚úÖ Only add keys through web interfaces"
  ],
  
  "worker_checklist": [
    "[ ] Read WORKER_TASK_ADD_SECRETS.md",
    "[ ] Access Supabase dashboard",
    "[ ] Copy 3 keys from Supabase",
    "[ ] Add 3 secrets to GitHub",
    "[ ] Add 6 variables to Netlify",
    "[ ] Trigger Netlify deployment",
    "[ ] Wait for deployment to complete (2-3 min)",
    "[ ] Verify site loads",
    "[ ] Take screenshots",
    "[ ] Report completion"
  ],
  
  "activation": {
    "status": "ACTIVE",
    "worker_notification": "IMMEDIATE",
    "escalation": "If not completed in 30 minutes, escalate to team lead",
    "blocking_other_tasks": true
  }
}
