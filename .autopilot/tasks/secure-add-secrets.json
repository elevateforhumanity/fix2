{
  "task_id": "secure-add-secrets",
  "name": "Securely Add Secrets to GitHub and Netlify",
  "description": "Add Supabase keys to GitHub Secrets and Netlify, then clean up",
  "version": "1.0.0",
  "priority": "critical",
  "security_level": "high",
  "steps": [
    {
      "step": 1,
      "title": "Add Secrets to GitHub",
      "type": "manual",
      "instructions": [
        "Go to: https://github.com/elevateforhumanity/fix2/settings/secrets/actions",
        "Click 'New repository secret'",
        "",
        "Add Secret 1:",
        "  Name: NEXT_PUBLIC_SUPABASE_URL",
        "  Secret: https://cuxzzpsyufcewtmicszk.supabase.co",
        "",
        "Add Secret 2:",
        "  Name: NEXT_PUBLIC_SUPABASE_ANON_KEY",
        "  Secret: [REDACTED - Get from Supabase dashboard]",
        "",
        "Add Secret 3:",
        "  Name: SUPABASE_SERVICE_ROLE_KEY",
        "  Secret: [REDACTED - Get from Supabase dashboard]"
      ],
      "security_note": "Keys are NOT stored in this file for security"
    },
    {
      "step": 2,
      "title": "Add Variables to Netlify",
      "type": "manual",
      "instructions": [
        "Go to: https://app.netlify.com/sites/12f120ab-3f63-419b-bc49-430f043415c1/settings/env",
        "Click 'Add a variable'",
        "",
        "Add the same 3 variables plus:",
        "  NEXT_PUBLIC_APP_URL = https://elevateconnectsdirectory.org",
        "  NEXT_PUBLIC_SITE_URL = https://elevateconnectsdirectory.org",
        "  NODE_ENV = production"
      ]
    },
    {
      "step": 3,
      "title": "Trigger Netlify Deploy",
      "type": "manual",
      "instructions": [
        "In Netlify, go to Deploys tab",
        "Click 'Trigger deploy' → 'Clear cache and deploy site'",
        "Wait 2-3 minutes for deployment"
      ]
    },
    {
      "step": 4,
      "title": "Clean Up Sensitive Data",
      "type": "automated",
      "script": "rm -f /tmp/*env* /tmp/*secret* ~/.bash_history",
      "instructions": [
        "Delete any temporary files with keys",
        "Clear command history",
        "Verify no keys in git history"
      ]
    },
    {
      "step": 5,
      "title": "Verify Deployment",
      "type": "manual",
      "instructions": [
        "Check: https://elevateconnectsdirectory.org",
        "Verify: No build errors in Netlify",
        "Test: Login/signup functionality"
      ]
    }
  ],
  "completion": {
    "message": "✅ Secrets added securely and deployment successful!",
    "security_checklist": [
      "✓ Keys stored in GitHub Secrets (encrypted)",
      "✓ Keys stored in Netlify (encrypted)",
      "✓ Temporary files deleted",
      "✓ No keys in git repository",
      "✓ No keys in conversation logs"
    ]
  }
}
