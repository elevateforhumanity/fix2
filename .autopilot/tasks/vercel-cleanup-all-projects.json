{
  "task_id": "vercel-cleanup-all-projects",
  "priority": "CRITICAL",
  "status": "pending",
  "created_at": "2025-11-15T11:05:00Z",
  "task_type": "vercel_cleanup",
  "title": "Audit ALL Vercel projects and eliminate unused environments",
  "description": "Complete audit of all Vercel projects under gitpod organization. Document all environment variables, identify the correct project (fix2-1c7w), ensure no information is mixed between projects, then delete all unused projects to save costs and eliminate confusion.",
  "estimated_duration": "20-30 minutes",
  "cost_impact": "HIGH - Unused projects cost money and cause confusion",
  "worker_requirements": {
    "access_needed": [
      "Vercel dashboard access (gitpod organization)",
      "Admin permissions to delete projects"
    ],
    "skills": [
      "Vercel project management",
      "Environment variable auditing",
      "Documentation"
    ]
  },
  "context": {
    "problem": "Multiple fix2 projects exist in Vercel, causing confusion about which one is correct. Need to audit all, ensure correct project has all variables, then delete unused ones.",
    "correct_project": "fix2-1c7w",
    "repository": "elevateforhumanity/fix2",
    "branch": "main"
  },
  "steps": [
    {
      "step": 1,
      "action": "list_all_vercel_projects",
      "instruction": "Create complete inventory of ALL Vercel projects",
      "details": {
        "location": "https://vercel.com/gitpod",
        "action": "Click 'View All Projects' and list every project",
        "focus": "Look for all projects starting with 'fix2' or related to elevateforhumanity",
        "document": "Create a table with: Project Name, Git Repo, Last Deployed, Status"
      },
      "output_format": {
        "create_file": "VERCEL_PROJECTS_INVENTORY.md",
        "include": [
          "Project name",
          "Connected repository",
          "Last deployment date",
          "Deployment status (active/failed)",
          "Number of deployments",
          "Custom domains (if any)"
        ]
      },
      "verification": "Complete list of all projects documented"
    },
    {
      "step": 2,
      "action": "audit_each_project_environment_variables",
      "instruction": "For EACH project found, document ALL environment variables in ALL environments",
      "details": {
        "for_each_project": {
          "navigate_to": "Project → Settings → Environment Variables",
          "document": {
            "production_variables": "List all variable names and which ones are set",
            "preview_variables": "List all variable names and which ones are set",
            "development_variables": "List all variable names and which ones are set"
          },
          "note_sensitive": "Mark which variables are marked as 'Sensitive'",
          "check_values": "For non-sensitive variables, note if values differ between projects"
        }
      },
      "output_format": {
        "create_file": "VERCEL_ENV_VARS_AUDIT.md",
        "structure": "One section per project with tables showing all variables per environment"
      },
      "verification": "All environment variables from all projects documented"
    },
    {
      "step": 3,
      "action": "compare_environment_variables",
      "instruction": "Compare environment variables across all projects to identify differences",
      "details": {
        "create_comparison_table": {
          "columns": ["Variable Name", "fix2-1c7w", "fix2-8mig", "fix2-i3z8", "Other Projects"],
          "rows": "One row per unique variable found",
          "mark_differences": "Highlight where values differ or variables are missing"
        },
        "identify_issues": [
          "Variables in old projects but missing in fix2-1c7w",
          "Different values for same variable across projects",
          "Sensitive variables that might be mixed up",
          "Any custom variables not in the standard list"
        ]
      },
      "output_format": {
        "append_to": "VERCEL_ENV_VARS_AUDIT.md",
        "section": "## Comparison and Differences"
      },
      "verification": "All differences documented and analyzed"
    },
    {
      "step": 4,
      "action": "ensure_fix2_1c7w_has_all_required_variables",
      "instruction": "Verify fix2-1c7w has ALL required variables in ALL environments before deleting other projects",
      "details": {
        "required_variables": [
          "SUPABASE_URL",
          "SUPABASE_ANON_KEY",
          "SUPABASE_SERVICE_ROLE_KEY",
          "NEXT_PUBLIC_SUPABASE_URL",
          "NEXT_PUBLIC_SUPABASE_ANON_KEY",
          "NEXT_PUBLIC_SITE_URL"
        ],
        "check_each_environment": ["Production", "Preview", "Development"],
        "if_missing": "Add the missing variable with correct value",
        "if_found_in_old_project": "Copy the value from old project to fix2-1c7w before deleting"
      },
      "critical_check": {
        "SUPABASE_SERVICE_ROLE_KEY": "Ensure this is set in fix2-1c7w before deleting any project that has it",
        "custom_variables": "If any old project has custom variables not in standard list, document and decide if needed"
      },
      "verification": "fix2-1c7w has all 6 required variables in all 3 environments"
    },
    {
      "step": 5,
      "action": "document_deletion_plan",
      "instruction": "Create a clear plan for which projects to delete and why",
      "details": {
        "for_each_project": {
          "decision": "KEEP or DELETE",
          "reason": "Why keeping or deleting",
          "risk_assessment": "Any risk in deleting (lost variables, active deployments, etc.)",
          "backup_needed": "Any information to save before deletion"
        },
        "expected_decisions": {
          "fix2-1c7w": "KEEP - This is the correct project connected to elevateforhumanity/fix2",
          "fix2-8mig": "DELETE - Wrong project, deploying old code with deprecation warnings",
          "fix2-i3z8": "DELETE - Old configuration, no longer used",
          "others": "REVIEW - Determine if needed"
        }
      },
      "output_format": {
        "create_file": "VERCEL_DELETION_PLAN.md",
        "include_checklist": "Checkbox for each project to delete"
      },
      "verification": "Clear deletion plan documented with reasons"
    },
    {
      "step": 6,
      "action": "backup_critical_information",
      "instruction": "Before deleting anything, save all critical information",
      "details": {
        "backup_items": [
          "All environment variable names and values (non-sensitive)",
          "Custom domain configurations",
          "Build settings (commands, framework, node version)",
          "Any custom redirects or headers",
          "Integration configurations",
          "Team member access settings"
        ],
        "save_to": "VERCEL_BACKUP_BEFORE_DELETION.md"
      },
      "verification": "All critical information backed up"
    },
    {
      "step": 7,
      "action": "final_verification_before_deletion",
      "instruction": "CRITICAL: Triple-check fix2-1c7w has ALL information before deleting anything",
      "details": {
        "verification_checklist": [
          {
            "check": "Environment Variables",
            "action": "Compare fix2-1c7w variables against EVERY other project",
            "requirement": "fix2-1c7w must have ALL variables from ALL projects",
            "if_missing": "STOP - Copy missing variables to fix2-1c7w first"
          },
          {
            "check": "Custom Domains",
            "action": "Check if any project to be deleted has custom domains",
            "requirement": "Document all custom domains before deletion",
            "if_found": "Note domain configuration for potential migration"
          },
          {
            "check": "Build Settings",
            "action": "Compare build commands, framework settings, node versions",
            "requirement": "Ensure fix2-1c7w has optimal build settings",
            "if_different": "Document differences and update fix2-1c7w if needed"
          },
          {
            "check": "Integration Configurations",
            "action": "Check for any integrations (GitHub, Slack, etc.)",
            "requirement": "Document all integrations before deletion",
            "if_found": "Note integration settings"
          },
          {
            "check": "Environment-Specific Variables",
            "action": "Check if projects have different values for Production/Preview/Development",
            "requirement": "Ensure fix2-1c7w has correct values per environment",
            "if_different": "Copy correct values to fix2-1c7w"
          },
          {
            "check": "Successful Deployments",
            "action": "Check if any project to be deleted has recent successful deployments",
            "requirement": "Understand why it succeeded and fix2-1c7w might have failed",
            "if_found": "Document what made it succeed (environment variables, commit, etc.)"
          }
        ],
        "create_comparison_table": {
          "file": "VERCEL_FINAL_COMPARISON_BEFORE_DELETE.md",
          "format": "Side-by-side comparison of fix2-1c7w vs each project to be deleted",
          "highlight": "Any information in projects to be deleted that's NOT in fix2-1c7w"
        },
        "stop_conditions": [
          "If ANY variable exists in a project to be deleted but NOT in fix2-1c7w",
          "If ANY project to be deleted has successful deployments and fix2-1c7w doesn't",
          "If ANY custom configuration exists that's not documented",
          "If SUPABASE_SERVICE_ROLE_KEY is missing from fix2-1c7w"
        ]
      },
      "output": {
        "create_file": "VERCEL_SAFE_TO_DELETE_CONFIRMATION.md",
        "include": [
          "Checklist of all verifications completed",
          "Confirmation that fix2-1c7w has ALL information",
          "List of what will be lost when deleting each project",
          "Explicit confirmation: 'SAFE TO DELETE' or 'NOT SAFE - MISSING: [list]'"
        ]
      },
      "verification": "Explicit written confirmation that fix2-1c7w has all information"
    },
    {
      "step": 8,
      "action": "delete_unused_projects",
      "instruction": "ONLY delete after step 7 confirms it's safe",
      "details": {
        "for_each_project_to_delete": {
          "steps": [
            "Navigate to project",
            "Go to Settings → Advanced",
            "Scroll to 'Delete Project' section",
            "Click 'Delete Project'",
            "Type project name to confirm",
            "Click 'Delete' button"
          ],
          "document_deletion": "Mark in deletion plan when completed"
        },
        "order": "Delete in this order: fix2-i3z8, fix2-8mig, then any others",
        "keep_fix2_1c7w": "DO NOT DELETE fix2-1c7w - this is the correct project"
      },
      "safety_check": "Before each deletion, confirm fix2-1c7w has all necessary variables",
      "verification": "All unused projects deleted, only fix2-1c7w remains"
    },
    {
      "step": 9,
      "action": "verify_fix2_1c7w_after_cleanup",
      "instruction": "Confirm fix2-1c7w is working correctly after cleanup",
      "details": {
        "checks": [
          "All 6 environment variables present in all 3 environments",
          "Git repository connected: elevateforhumanity/fix2",
          "Branch: main",
          "Latest commit deployed",
          "No failed deployments",
          "Site loads without errors"
        ],
        "test_deployment": {
          "action": "Trigger a new deployment",
          "uncheck": "Use existing build cache",
          "monitor": "Build logs for success",
          "verify": "Site loads at deployment URL"
        }
      },
      "verification": "fix2-1c7w working correctly, site accessible"
    },
    {
      "step": 10,
      "action": "create_final_report",
      "instruction": "Document the complete cleanup process and results",
      "details": {
        "create_file": "VERCEL_CLEANUP_COMPLETE.md",
        "include_sections": [
          "Projects audited (count and names)",
          "Environment variables audited (total count)",
          "Differences found between projects",
          "Projects deleted (names and reasons)",
          "Variables migrated to fix2-1c7w",
          "Final state of fix2-1c7w",
          "Cost savings estimate",
          "Recommendations for future"
        ]
      },
      "verification": "Complete report created and saved"
    },
    {
      "step": 11,
      "action": "commit_documentation",
      "instruction": "Commit all documentation files to the repository",
      "details": {
        "files_to_commit": [
          "VERCEL_PROJECTS_INVENTORY.md",
          "VERCEL_ENV_VARS_AUDIT.md",
          "VERCEL_DELETION_PLAN.md",
          "VERCEL_BACKUP_BEFORE_DELETION.md",
          "VERCEL_FINAL_COMPARISON_BEFORE_DELETE.md",
          "VERCEL_SAFE_TO_DELETE_CONFIRMATION.md",
          "VERCEL_CLEANUP_COMPLETE.md"
        ],
        "commit_message": "Complete Vercel cleanup audit and documentation",
        "push": "Push to main branch"
      },
      "verification": "All documentation committed and pushed"
    }
  ],
  "success_criteria": {
    "required": [
      "All Vercel projects inventoried",
      "All environment variables documented",
      "Differences between projects identified",
      "fix2-1c7w has all required variables in all environments",
      "Unused projects deleted",
      "Only fix2-1c7w remains",
      "fix2-1c7w working correctly",
      "Complete documentation created"
    ]
  },
  "safety_checks": {
    "before_deleting_any_project": [
      "Confirm fix2-1c7w has all variables from that project",
      "Backup any custom configurations",
      "Document the deletion in the plan",
      "Double-check it's not the correct project"
    ],
    "never_delete": [
      "fix2-1c7w - This is the correct project"
    ]
  },
  "expected_deletions": [
    "fix2-8mig - Deploying old code with deprecation warnings",
    "fix2-i3z8 - Old configuration no longer used",
    "Any other fix2-* projects not actively used"
  ],
  "cost_savings": {
    "unused_projects": "Each unused project costs money for builds and hosting",
    "failed_builds": "Eliminating projects with failed builds saves compute costs",
    "clarity": "Single project eliminates confusion and wasted time"
  },
  "rollback_plan": {
    "if_wrong_project_deleted": "Projects can be restored from Git repository by reconnecting",
    "if_variables_lost": "Refer to VERCEL_BACKUP_BEFORE_DELETION.md for all values",
    "if_fix2_1c7w_breaks": "Check VERCEL_ENV_VARS_AUDIT.md for correct configuration"
  },
  "documentation_references": [
    "VERCEL_ENV_AUDIT_CHECKLIST.md",
    "WORKER_TASK_VERCEL_CONNECT.md",
    "AUTOPILOT_VERCEL_LINK.md"
  ]
}
