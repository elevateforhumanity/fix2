# Team-Ready System Documentation

## Overview

Elevate for Humanity now has a complete, team-proof system for managing applications, enrollments, and case management. This document explains what each role sees and how to use the system.

---

## üéØ System Capabilities

### For Administrators (`/admin`)

**What You Can Do:**
1. **Review Applications** - See all incoming applications with clear status indicators
2. **Approve & Enroll** - One-click approval that creates user accounts and enrollments
3. **Monitor Progress** - Track active enrollments, completions, and certificates
4. **Export Reports** - Download CSV files for funders (WIOA, WRG, JRI, etc.)
5. **Manage Programs** - Use Course Builder to create and edit programs
6. **View Analytics** - See funding mix, completion rates, and program performance

**Key Pages:**
- `/admin` - Overview dashboard with tooltips explaining each metric
- `/admin/applications` - Review and approve applications
- `/admin/applications/[id]` - Detailed application view with approval workflow
- `/admin/enrollments` - Manage enrollments with CSV export
- `/admin/certificates` - View issued certificates
- `/admin/courses` - Course Builder for program management

---

### For Case Managers (`/cm`)

**What You Can Do:**
1. **View Your Caseload** - See all learners assigned to you
2. **Track Progress** - Monitor completion percentages and last activity
3. **Add Notes** - Document check-ins, barriers, wins, and coordination
4. **View Certificates** - Access completion certificates for your learners
5. **Monitor Funding** - See funding types (WIOA, WRG, JRI, etc.) for each learner

**Key Pages:**
- `/cm` - Your dashboard with caseload summary
- `/cm/learners/[id]` - Detailed learner view with progress and notes

**Security:**
- Case managers can ONLY see learners assigned to them
- All data is protected by Row Level Security (RLS)
- Cannot access admin functions or other case managers' learners

---

## üìä Admin Dashboard - What Each Number Means

### Total Applications
**What it shows:** Total number of applications submitted through the intake form

**Why it matters:** Track demand and outreach impact. Shows how many people are interested in your programs.

**Tooltip:** "Total number of applications submitted through the Elevate For Humanity intake form. This includes learners referred by workforce partners, employers, and the public. Use this to track demand and outreach impact."

---

### Pending Applications
**What it shows:** Applications waiting for review and approval

**Why it matters:** These need action. Click "Review now" to approve and enroll learners.

**Tooltip:** "Applications that need review and approval. Click 'Review now' to approve applications and automatically create user accounts and enrollments."

---

### Active Enrollments
**What it shows:** Learners currently in programs

**Why it matters:** These are your in-progress learners who need support and check-ins.

**Tooltip:** "Number of learners who are currently enrolled in at least one program and marked as 'active' in the system. These are your in-progress learners that need support, check-ins, and coordination."

---

### Completed Enrollments
**What it shows:** Learners who finished programs

**Why it matters:** Use this number for completion reporting to workforce boards and funders.

**Tooltip:** "Total number of enrollments that have been marked 'completed.' These are learners who have finished all required coursework or program milestones. Use this number for completion reporting to workforce boards and funders."

---

### Certificates Issued
**What it shows:** Total certificates generated

**Why it matters:** Verification, audits, and showing funders how many learners completed pathways.

**Tooltip:** "Total certificates generated by the LMS for completed programs. This can be used for verification, audits, and to show funders how many learners have finished a pathway and received documentation."

---

### Funded Enrollments
**What it shows:** Enrollments with identified funding sources

**Why it matters:** Track funding utilization and report to workforce boards.

**Tooltip:** "Total enrollments with identified funding sources. Export detailed funding reports from the Enrollments page to share with workforce boards and funding partners."

---

## üîÑ Application Approval Workflow

### Step 1: View Applications
1. Go to `/admin/applications`
2. See all applications with status indicators:
   - üü† **submitted** - New, needs review
   - üü¢ **converted** - Approved and enrolled
   - üî¥ **rejected** - Not a fit or withdrew

### Step 2: Review Application Details
1. Click "View Details" on any application
2. See applicant information:
   - Name, email, phone
   - Program of interest
   - Source (WorkOne, website, referral, etc.)
   - Any notes

### Step 3: Approve & Enroll
1. Select the program to enroll them into
2. Choose funding type (WIOA, WRG, JRI, OJT, WEX, Self-pay, Employer)
3. Click "Approve & Enroll"

**What Happens Automatically:**
- ‚úÖ Creates Supabase Auth user (if they don't exist)
- ‚úÖ Creates profile with student role
- ‚úÖ Creates enrollment record
- ‚úÖ Updates application status to "converted"
- ‚úÖ Student can log in immediately

---

## üìà CSV Export for Funders

### How to Export Reports

**From Enrollments Page (`/admin/enrollments`):**

1. **Full Report:**
   - Click "Export CSV" button
   - Downloads all enrollments with program details

2. **Filtered Reports:**
   - Click quick filter buttons:
     - "Active Only" - Current enrollments
     - "WIOA Funded" - WIOA enrollments only
     - "WRG Funded" - WRG enrollments only
     - "JRI Funded" - JRI enrollments only
     - "Completed Only" - Finished programs

**CSV Includes:**
- Enrollment ID
- Program title and slug
- User ID
- Status (active, completed, withdrawn)
- Funding type
- Source
- Start date
- Completion date
- Created date

**Use Cases:**
- Monthly reports to WorkOne
- WRG quarterly reporting
- JRI participant tracking
- OJT verification
- Funder audits

---

## üë• Case Manager System

### Database Structure

**Tables:**
1. **profiles** - User information with roles
2. **case_manager_assignments** - Maps case managers to learners
3. **case_manager_notes** - Interaction tracking

**Assignment Process:**
1. Admin assigns learner to case manager
2. Row created in `case_manager_assignments`
3. Case manager can now see that learner
4. RLS policies enforce access control

### Case Manager Dashboard

**Summary Cards:**
- **Assigned Learners** - Total in your caseload
- **Active Enrollments** - Currently in programs
- **Completions (Last 30 Days)** - Recent successes

**Learners Table:**
- Name
- Primary program
- % Complete (with progress bar)
- Status (active, completed, withdrawn)
- Last activity date
- Funding type
- "View" button for details

### Learner Detail Page

**Sections:**

1. **Learner Information**
   - Name, email, phone
   - Contact details

2. **Program Enrollments**
   - All programs they're enrolled in
   - Status, funding type, dates
   - Progress percentage with visual bar
   - Certificate links (if completed)

3. **Case Notes & Coordination**
   - Add new notes with type:
     - Check-in
     - Barrier
     - Win
     - Coordination
     - Other
   - View all historical notes
   - See who added each note and when

**Adding Notes:**
1. Click "Add Note" button
2. Select note type
3. Enter note text
4. Click "Save Note"
5. Note appears in timeline

---

## üîê Security & Access Control

### Row Level Security (RLS)

**Admins:**
- See everything
- Manage all users, enrollments, applications

**Case Managers:**
- See only assigned learners
- View enrollments for their learners
- Add notes for their learners
- Cannot see other case managers' learners

**Students:**
- See only their own data
- Access their enrollments and progress
- View their certificates

### Authentication Flow

1. User logs in at `/login` or `/admin/login`
2. Supabase Auth verifies credentials
3. System checks role from profiles table
4. Redirects to appropriate dashboard:
   - Admin ‚Üí `/admin`
   - Case Manager ‚Üí `/cm`
   - Student ‚Üí `/portal/student/dashboard`

---

## üìù Staff Training Guide

### For New Administrators

**Week 1: Learn the Basics**
- [ ] Log in to `/admin`
- [ ] Review dashboard tooltips (hover over ‚ÑπÔ∏è icons)
- [ ] Click through each stat card to see detail pages
- [ ] Practice reviewing applications
- [ ] Approve a test application

**Week 2: Master Workflows**
- [ ] Approve 5+ applications
- [ ] Export a CSV report
- [ ] Use Course Builder to view programs
- [ ] Check enrollments page
- [ ] Review certificates

**Week 3: Advanced Features**
- [ ] Assign learners to case managers
- [ ] Export filtered reports (WIOA, WRG, JRI)
- [ ] Monitor completion rates
- [ ] Review funding mix

### For New Case Managers

**Week 1: Get Oriented**
- [ ] Log in to `/cm`
- [ ] Review your caseload
- [ ] Click "View" on a learner
- [ ] Read through existing notes
- [ ] Add your first check-in note

**Week 2: Active Management**
- [ ] Add notes for all learners
- [ ] Identify learners with low progress
- [ ] Document barriers and wins
- [ ] Track last activity dates
- [ ] Follow up with inactive learners

**Week 3: Coordination**
- [ ] Use coordination notes for partner communication
- [ ] Track funding requirements
- [ ] Monitor completion progress
- [ ] Prepare for funder meetings

---

## üöÄ Next Steps

### Immediate (Week 1)
1. **Configure Supabase**
   - Add environment variables to Vercel
   - Run database migrations
   - Test authentication

2. **Create Test Users**
   - Admin account
   - Case manager account
   - Student account

3. **Test Workflows**
   - Submit test application
   - Approve and enroll
   - Verify student can log in
   - Add case manager notes

### Short Term (Month 1)
1. **Assign Case Managers**
   - Create case manager accounts
   - Assign learners to case managers
   - Train case managers on system

2. **Set Up Reporting**
   - Schedule monthly CSV exports
   - Create funder report templates
   - Document reporting procedures

3. **Onboard Staff**
   - Train administrators
   - Train case managers
   - Create internal documentation

### Long Term (Quarter 1)
1. **Email Integration**
   - Welcome emails for new users
   - Password reset links
   - Progress notifications

2. **Advanced Reporting**
   - Custom report builder
   - Automated funder reports
   - Performance dashboards

3. **Mobile Access**
   - Optimize for mobile devices
   - Case manager mobile app
   - Student mobile experience

---

## üìû Support & Troubleshooting

### Common Issues

**"Database not configured" message:**
- Add Supabase environment variables to Vercel
- Check `.env.example` for required variables
- Verify Supabase project is active

**Can't approve applications:**
- Verify admin role in profiles table
- Check RLS policies are enabled
- Ensure programs exist in database

**Case manager can't see learners:**
- Verify assignment in case_manager_assignments table
- Check case manager role in profiles
- Ensure assignment status is 'active'

**CSV export is empty:**
- Check if enrollments exist
- Verify funding_type is set
- Try exporting without filters first

---

## üéì Glossary

**Application** - Initial intake form submission from prospective learner

**Enrollment** - Active participation in a program after approval

**Case Manager** - Staff member who coordinates learner support (WorkOne, JRI, etc.)

**Funding Type** - Source of program funding (WIOA, WRG, JRI, OJT, WEX, etc.)

**RLS** - Row Level Security, database-level access control

**Profile** - User account information including role

**Assignment** - Connection between case manager and learner

**Progress** - Completion percentage through program lessons

**Certificate** - Official completion document issued after finishing program

---

## üìö Additional Resources

**Database Migrations:**
- `supabase/migrations/01_core_schema.sql` - Core tables
- `supabase/migrations/02_rls_policies.sql` - Security policies
- `supabase/migrations/03_case_manager_system.sql` - Case manager tables

**API Routes:**
- `/api/admin/applications/[id]/approve` - Approve applications
- `/api/admin/export/enrollments` - Export CSV reports
- `/api/cm/dashboard` - Case manager dashboard data
- `/api/cm/learners/[id]` - Learner details
- `/api/cm/learners/[id]/notes` - Add case notes

**Key Components:**
- `app/admin/page.tsx` - Admin dashboard with tooltips
- `app/admin/applications/[id]/page.tsx` - Application approval
- `app/cm/page.tsx` - Case manager dashboard
- `app/cm/learners/[id]/page.tsx` - Learner detail view

---

## ‚úÖ System Checklist

### Before Launch
- [ ] Supabase configured with environment variables
- [ ] Database migrations run successfully
- [ ] Admin account created and tested
- [ ] Case manager account created and tested
- [ ] Student account created and tested
- [ ] Application approval workflow tested
- [ ] CSV export tested
- [ ] Case manager assignment tested
- [ ] Case notes functionality tested
- [ ] All tooltips reviewed and accurate
- [ ] Staff training materials prepared
- [ ] Funder reporting templates created

### Post-Launch
- [ ] Monitor application submissions
- [ ] Review approval workflow efficiency
- [ ] Collect staff feedback
- [ ] Track CSV export usage
- [ ] Monitor case manager adoption
- [ ] Review completion rates
- [ ] Adjust tooltips based on questions
- [ ] Update training materials
- [ ] Schedule regular system reviews

---

**Last Updated:** November 24, 2024
**Version:** 1.0
**Status:** Production Ready ‚úÖ
