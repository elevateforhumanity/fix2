{
  "task_id": "deploy-cloudflare-worker-001",
  "priority": "CRITICAL",
  "status": "PENDING_TOKEN",
  "created_at": "2025-11-02T22:52:00Z",
  "task_type": "deployment",
  "description": "Deploy enrollment injector worker to Cloudflare",
  "blocking_issue": "Invalid Cloudflare API token",
  "required_action": {
    "action": "UPDATE_CLOUDFLARE_TOKEN",
    "method": "autopilot_token_refresh",
    "script": "scripts/autopilot-update-token-deploy.cjs",
    "instructions": "Autopilot should provide fresh Cloudflare API token with Workers Scripts Edit permission"
  },
  "deployment_details": {
    "worker_name": "enrollment-injector",
    "worker_file": "workers/enrollment-injector-worker.ts",
    "config_file": "wrangler-enrollment.toml",
    "environment": "production",
    "account_id": "6ba1d2a52a3fa230972960db307ac7c0"
  },
  "autopilot_instructions": {
    "step_1": "Get fresh Cloudflare API token from user's Cloudflare account",
    "step_2": "Run: node scripts/autopilot-update-token-deploy.cjs <TOKEN>",
    "step_3": "Verify deployment success",
    "step_4": "Configure routes via Cloudflare API",
    "step_5": "Mark task as COMPLETE"
  },
  "token_requirements": {
    "permissions": [
      "Account > Cloudflare Workers Scripts > Edit",
      "Zone > Workers Routes > Edit"
    ],
    "get_token_url": "https://dash.cloudflare.com/profile/api-tokens"
  },
  "fallback_methods": [
    "Deploy via Cloudflare dashboard (manual)",
    "Use wrangler login OAuth",
    "Deploy via Cloudflare API directly"
  ],
  "success_criteria": {
    "worker_deployed": true,
    "routes_configured": true,
    "enrollment_programs_visible": true,
    "zero_manual_intervention": true
  },
  "user_preference": {
    "no_manual_work": true,
    "autopilot_handles_everything": true,
    "never_accept_cannot_do": true,
    "find_workarounds": true
  }
}
