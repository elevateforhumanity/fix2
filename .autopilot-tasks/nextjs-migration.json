{
  "task_id": "nextjs-migration-001",
  "task_name": "Migrate to Next.js SSG/SSR",
  "priority": "high",
  "status": "pending",
  "created_at": "2025-11-05T12:17:00Z",
  "type": "migration",
  "description": "Migrate from React SPA (Vite) to Next.js SSG/SSR to eliminate skeleton pages",
  
  "objectives": [
    "Download and extract Next.js starter (efh-next-ssg-ssr.zip)",
    "Migrate all content from current React app to Next.js pages",
    "Configure environment variables for production",
    "Test locally to verify no skeleton pages",
    "Deploy to Netlify with proper configuration",
    "Verify deployment and update DNS if needed"
  ],
  
  "source": {
    "type": "react-spa-vite",
    "location": "/workspaces/fix2/src",
    "entry_point": "/workspaces/fix2/src/main.tsx",
    "pages": [
      "/",
      "/programs",
      "/programs/:id",
      "/lms",
      "/lms/courses",
      "/certificates",
      "/verify",
      "/about",
      "/partners",
      "/support",
      "/community",
      "/connect",
      "/auth/login",
      "/auth/signup"
    ],
    "assets": "/workspaces/fix2/public",
    "api_config": "/workspaces/fix2/public/api/efh-config.json"
  },
  
  "target": {
    "type": "nextjs-app-router",
    "location": "/workspaces/fix2/nextjs-site",
    "framework": "Next.js 14+",
    "rendering": "SSG + SSR",
    "deployment": "netlify"
  },
  
  "migration_steps": [
    {
      "step": 1,
      "name": "Download Next.js Starter",
      "action": "download",
      "source": "efh-next-ssg-ssr.zip",
      "destination": "/workspaces/fix2/nextjs-site",
      "status": "pending"
    },
    {
      "step": 2,
      "name": "Extract and Setup",
      "action": "extract",
      "commands": [
        "cd /workspaces/fix2",
        "unzip efh-next-ssg-ssr.zip -d nextjs-site",
        "cd nextjs-site",
        "npm install"
      ],
      "status": "pending"
    },
    {
      "step": 3,
      "name": "Migrate Homepage Content",
      "action": "migrate_content",
      "source_file": "/workspaces/fix2/src/pages/Home.tsx",
      "target_file": "/workspaces/fix2/nextjs-site/app/page.tsx",
      "content_to_migrate": [
        "Hero section",
        "Programs overview",
        "Features section",
        "Testimonials",
        "Stats section",
        "CTA sections"
      ],
      "status": "pending"
    },
    {
      "step": 4,
      "name": "Migrate Programs Page",
      "action": "migrate_content",
      "source_file": "/workspaces/fix2/src/pages/Programs.tsx",
      "target_file": "/workspaces/fix2/nextjs-site/app/programs/page.tsx",
      "content_to_migrate": [
        "Programs listing",
        "Program cards",
        "Filters",
        "Search functionality"
      ],
      "status": "pending"
    },
    {
      "step": 5,
      "name": "Migrate Partners Page",
      "action": "migrate_content",
      "source_file": "/workspaces/fix2/src/pages/Partners.tsx",
      "target_file": "/workspaces/fix2/nextjs-site/app/partners/page.tsx",
      "content_to_migrate": [
        "Partner logos",
        "Partner descriptions",
        "Partnership benefits"
      ],
      "status": "pending"
    },
    {
      "step": 6,
      "name": "Migrate Contact Page",
      "action": "migrate_content",
      "source_file": "/workspaces/fix2/src/pages/Contact.tsx",
      "target_file": "/workspaces/fix2/nextjs-site/app/contact/page.tsx",
      "content_to_migrate": [
        "Contact form",
        "Contact information",
        "Social media links"
      ],
      "status": "pending"
    },
    {
      "step": 7,
      "name": "Copy Assets",
      "action": "copy_assets",
      "source": "/workspaces/fix2/public",
      "target": "/workspaces/fix2/nextjs-site/public",
      "include": [
        "images/**/*",
        "icons/**/*",
        "api/**/*.json",
        "favicon.ico",
        "robots.txt"
      ],
      "status": "pending"
    },
    {
      "step": 8,
      "name": "Configure Environment",
      "action": "configure",
      "file": "/workspaces/fix2/nextjs-site/.env.local",
      "variables": {
        "NEXT_PUBLIC_API_URL": "https://api.elevateforhumanity.org",
        "NEXT_PUBLIC_SUPABASE_URL": "https://cuxzzpsyufcewtmicszk.supabase.co",
        "NEXT_PUBLIC_SUPABASE_ANON_KEY": "${SUPABASE_ANON_KEY}",
        "BACKEND_API_URL": "https://api.elevateforhumanity.org"
      },
      "status": "pending"
    },
    {
      "step": 9,
      "name": "Test Locally",
      "action": "test",
      "commands": [
        "cd /workspaces/fix2/nextjs-site",
        "npm run build",
        "npm run start"
      ],
      "verify": [
        "No skeleton pages",
        "All pages load",
        "API proxy works",
        "Images load correctly"
      ],
      "status": "pending"
    },
    {
      "step": 10,
      "name": "Deploy to Netlify",
      "action": "deploy",
      "platform": "netlify",
      "site_name": "elevateforhumanity-nextjs",
      "build_command": "npm run build",
      "publish_directory": ".next",
      "environment_variables": [
        "NEXT_PUBLIC_API_URL",
        "NEXT_PUBLIC_SUPABASE_URL",
        "NEXT_PUBLIC_SUPABASE_ANON_KEY",
        "BACKEND_API_URL"
      ],
      "status": "pending"
    }
  ],
  
  "content_mapping": {
    "homepage": {
      "source": "/workspaces/fix2/src/pages/Home.tsx",
      "target": "/workspaces/fix2/nextjs-site/app/page.tsx",
      "sections": [
        "hero",
        "programs_overview",
        "features",
        "testimonials",
        "stats",
        "cta"
      ]
    },
    "programs": {
      "source": "/workspaces/fix2/src/pages/Programs.tsx",
      "target": "/workspaces/fix2/nextjs-site/app/programs/page.tsx",
      "data_source": "/workspaces/fix2/public/api/programs.json"
    },
    "partners": {
      "source": "/workspaces/fix2/src/pages/Partners.tsx",
      "target": "/workspaces/fix2/nextjs-site/app/partners/page.tsx",
      "data_source": "/workspaces/fix2/public/api/partnerships.json"
    },
    "contact": {
      "source": "/workspaces/fix2/src/pages/Contact.tsx",
      "target": "/workspaces/fix2/nextjs-site/app/contact/page.tsx"
    }
  },
  
  "environment_config": {
    "production": {
      "NEXT_PUBLIC_API_URL": "https://api.elevateforhumanity.org",
      "NEXT_PUBLIC_SUPABASE_URL": "https://cuxzzpsyufcewtmicszk.supabase.co",
      "NEXT_PUBLIC_SUPABASE_ANON_KEY": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN1eHp6cHN5dWZjZXd0bWljc3prIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA3MzI0NzUsImV4cCI6MjA0NjMwODQ3NX0.9y3VZ_pqLbHqEqGJYqxQxqxQxqxQxqxQxqxQxqxQxqxQ",
      "BACKEND_API_URL": "https://api.elevateforhumanity.org"
    }
  },
  
  "success_criteria": [
    "All pages load without skeleton states",
    "Content visible immediately (< 1 second)",
    "No CORS errors in console",
    "API proxy works correctly",
    "All images and assets load",
    "SEO metadata present on all pages",
    "Lighthouse score > 90",
    "Mobile responsive",
    "Build completes without errors",
    "Deployment successful"
  ],
  
  "rollback_plan": {
    "enabled": true,
    "keep_old_site": true,
    "test_before_dns_switch": true,
    "can_revert": true
  },
  
  "auto_execute": true,
  "auto_commit": true,
  "auto_deploy": true,
  "notify_on_completion": true,
  
  "estimated_time": "2-3 hours",
  "risk_level": "low",
  "impact": "high"
}
