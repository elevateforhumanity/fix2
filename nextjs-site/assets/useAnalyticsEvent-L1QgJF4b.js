import{r as t}from"./vendor-react-mXmGo1rS.js";import{g as r}from"./auth-1fW2cf6c.js";import{s as e}from"./supa-BrS98-L_.js";function n(n,a){const o=a?JSON.stringify(a):void 0;t.useEffect(()=>{let t=!0;return(async()=>{const a=await async function(){var t,e;try{const n=await r();if(!n)return;return{id:null!=(e=null!=(t=n.id)?t:n.email)?e:"anonymous",role:n.role,email:n.email}}catch(n){return}}();t&&await async function(t){var r,n,a;if(t.eventType)try{const o={event_type:t.eventType,actor:null!=(r=t.actor)?r:null,properties:null!=(n=t.properties)?n:null,created_at:null!=(a=t.timestamp)?a:null},{error:i}=await e.from("analytics_events").insert([o]);if(i)throw i}catch(o){}}({eventType:n,actor:a,properties:o?JSON.parse(o):void 0})})(),()=>{t=!1}},[n,o])}export{n as u};
