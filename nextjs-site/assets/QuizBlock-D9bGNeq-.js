import{r as e,j as s}from"./vendor-react-mXmGo1rS.js";import{s as t}from"./supa-BrS98-L_.js";import"./vendor-BU8AdXDg.js";import"./vendor-supabase-BOQaJsF3.js";function a({lessonId:a}={}){const[i,r]=e.useState([]),[n,d]=e.useState({}),[o,l]=e.useState(!1);return e.useEffect(()=>{a&&t.from("quiz_questions").select("id, prompt, options").eq("lesson_id",a).then(({data:e})=>r(e||[]))},[a]),0===i.length?null:s.jsxs("div",{className:"mt-8 card p-4",children:[s.jsx("div",{className:"font-semibold",children:"Quick Check"}),i.map(e=>s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"font-medium",children:e.prompt}),s.jsx("div",{className:"mt-2 grid gap-2",children:(e.options||[]).map(t=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio","aria-label":"radio input",name:e.id,value:t,onChange:s=>d(t=>({...t,[e.id]:s.target.value}))}),s.jsx("span",{children:t})]},t))})]},e.id)),s.jsx("button",{onClick:async function(){const e=(await t.auth.getUser()).data.user;if(!e)return alert("Sign in required");const s=Object.entries(n).map(([s,t])=>({question_id:s,user_id:e.id,answer:t})),{error:a}=await t.from("quiz_responses").insert(s);if(a)return alert(a.message);l(!0)},className:"btn mt-4",disabled:o,children:o?"Submitted":"Submit"})]})}export{a as default};
