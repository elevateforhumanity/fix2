import{r as s,j as e}from"./vendor-react-mXmGo1rS.js";import{u as a,s as t}from"./auth-1fW2cf6c.js";import{s as l}from"./supa-BrS98-L_.js";import{b as n}from"./vendor-router-umqT_8ks.js";import"./vendor-BU8AdXDg.js";import"./vendor-supabase-BOQaJsF3.js";function r(){var r;const{user:i,loading:c}=a(),d=n(),[o,m]=s.useState(null!=(r=null==i?void 0:i.full_name)?r:""),[u,x]=s.useState(!1),[h,j]=s.useState("");return s.useEffect(()=>{var s;m(null!=(s=null==i?void 0:i.full_name)?s:"")},[i]),c?e.jsx("section",{className:"section",children:e.jsx("div",{className:"container max-w-xl mx-auto",children:e.jsx("div",{className:"card p-6 text-center",children:"Loading..."})})}):i?e.jsx("section",{className:"section",children:e.jsxs("div",{className:"container max-w-xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Account"}),e.jsxs("div",{className:"card p-6 mt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-brand-text-light",children:"Email"}),e.jsx("div",{className:"font-medium",children:i.email})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-brand-text-light",children:"Role"}),e.jsx("div",{className:"font-medium capitalize",children:i.role})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),e.jsx("input",{type:"text","aria-label":"text input",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-brand-300",value:o,onChange:s=>m(s.target.value)})]}),h&&e.jsx("div",{className:"p-3 bg-brand-50 border border-brand-200 rounded-lg text-sm",children:h}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"btn",onClick:async function(){if(i){x(!0),j("");try{const{error:s}=await l.from("profiles").upsert({id:i.id,full_name:o});if(s)throw s;j("Profile updated successfully!")}catch(s){j(s.message)}finally{x(!1)}}},disabled:u,children:u?"Saving...":"Save Changes"}),e.jsx("button",{className:"btn-outline",onClick:async function(){await t(),d("/")},children:"Sign Out"})]})]}),"instructor"===i.role&&e.jsxs("div",{className:"mt-6 card p-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Instructor Tools"}),e.jsx("p",{className:"mt-2 text-brand-text-muted",children:"Manage your courses and lessons"}),e.jsx("a",{href:"/instructor/dashboard",className:"btn mt-4 inline-block",children:"Go to Instructor Dashboard"})]})]})}):(d("/auth/login"),null)}export{r as default};
