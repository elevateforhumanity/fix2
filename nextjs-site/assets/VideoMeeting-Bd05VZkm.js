import{r as e,j as t}from"./vendor-react-C-ZQNdj3.js";import{u as r,c as n}from"./vendor-router-CQjfSXV_.js";import"./vendor-Da1LjC7-.js";var o={};function i({meetingCode:r,userName:n,isModerator:i=!1,onLeave:a}){const s=e.useRef(null),[d,l]=e.useState(null),[c,m]=e.useState(!1),[g,p]=e.useState([]),[u,h]=e.useState(!0);e.useEffect(()=>{const e=()=>{const e=o.REACT_APP_JITSI_DOMAIN||"meet.jit.si",i={roomName:r,width:"100%",height:"100%",parentNode:s.current,userInfo:{displayName:n,email:""},configOverwrite:{startWithAudioMuted:!1,startWithVideoMuted:!1,enableWelcomePage:!1,prejoinPageEnabled:!1,disableDeepLinking:!0,enableClosePage:!1,toolbarButtons:["microphone","camera","closedcaptions","desktop","fullscreen","fodeviceselection","hangup","profile","chat","recording","livestreaming","etherpad","sharedvideo","settings","raisehand","videoquality","filmstrip","feedback","stats","shortcuts","tileview","videobackgroundblur","download","help","mute-everyone","security"]},interfaceConfigOverwrite:{SHOW_JITSI_WATERMARK:!1,SHOW_WATERMARK_FOR_GUESTS:!1,SHOW_BRAND_WATERMARK:!1,BRAND_WATERMARK_LINK:"",SHOW_POWERED_BY:!1,DISPLAY_WELCOME_PAGE_CONTENT:!1,DISPLAY_WELCOME_PAGE_TOOLBAR_ADDITIONAL_CONTENT:!1,APP_NAME:"Elevate Meet",NATIVE_APP_NAME:"Elevate Meet",PROVIDER_NAME:"Elevate for Humanity",MOBILE_APP_PROMO:!1}},d=new window.JitsiMeetExternalAPI(e,i);d.addEventListener("videoConferenceJoined",e=>{console.log("Joined meeting:",e),h(!1)}),d.addEventListener("participantJoined",e=>{console.log("Participant joined:",e),t(d)}),d.addEventListener("participantLeft",e=>{console.log("Participant left:",e),t(d)}),d.addEventListener("videoConferenceLeft",()=>{console.log("Left meeting"),a&&a()}),d.addEventListener("recordingStatusChanged",e=>{m(e.on)}),l(d)},t=async e=>{const t=await e.getParticipantsInfo();p(t)};return(()=>{if(window.JitsiMeetExternalAPI)return void e();const t=document.createElement("script");t.src="https://meet.jit.si/external_api.js",t.async=!0,t.onload=()=>e(),document.body.appendChild(t)})(),()=>{d&&d.dispose()}},[r,n,a]);return t.jsxs("div",{style:{width:"100%",height:"100vh",display:"flex",flexDirection:"column",backgroundColor:"#000"},children:[u&&t.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#fff",fontSize:"1.5rem",zIndex:1e3},children:"Joining meeting..."}),t.jsxs("div",{style:{padding:"1rem",backgroundColor:"#1a1a1a",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsx("h3",{style:{margin:0},children:"Elevate Meet"}),t.jsxs("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.875rem",opacity:.7},children:["Meeting Code: ",r]})]}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[c&&t.jsxs("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:"var(--brand-danger)",borderRadius:"0.25rem",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{width:"8px",height:"8px",backgroundColor:"#fff",borderRadius:"50%",animation:"pulse 2s infinite"}}),"Recording"]}),t.jsxs("span",{style:{fontSize:"0.875rem"},children:[g.length," participant",1!==g.length?"s":""]})]})]}),t.jsx("div",{ref:s,style:{flex:1,width:"100%",height:"100%"}}),i&&t.jsx("div",{style:{position:"absolute",bottom:"2rem",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"1rem",padding:"1rem",backgroundColor:"rgba(0, 0, 0, 0.8)",borderRadius:"0.5rem",zIndex:100},children:c?t.jsx("button",{onClick:()=>{d&&i&&d.executeCommand("stopRecording","file")},style:{padding:"0.5rem 1rem",backgroundColor:"var(--brand-text-muted)",color:"#fff",border:"none",borderRadius:"0.25rem",cursor:"pointer",fontSize:"0.875rem"},children:"Stop Recording"}):t.jsx("button",{onClick:()=>{d&&i&&d.executeCommand("startRecording",{mode:"file"})},style:{padding:"0.5rem 1rem",backgroundColor:"var(--brand-danger)",color:"#fff",border:"none",borderRadius:"0.25rem",cursor:"pointer",fontSize:"0.875rem"},children:"Start Recording"})}),t.jsx("style",{children:"\n        @keyframes pulse {\n          0%, 100% { opacity: 1; }\n          50% { opacity: 0.5; }\n        }\n      "})]})}function a(){const{meetingCode:o}=r(),a=n(),[s,d]=e.useState(""),[l,c]=e.useState(!1),[m,g]=e.useState(null),[p,u]=e.useState(!0);e.useEffect(()=>{o?(async()=>{try{const e=await fetch(`/api/meetings/${o}`),t=await e.json();g(t)}catch(e){console.error("Failed to load meeting:",e)}finally{u(!1)}})():u(!1);const e=localStorage.getItem("userName");e&&d(e)},[o]);const h=()=>{s.trim()?(localStorage.setItem("userName",s),c(!0),fetch(`/api/meetings/${o}/join`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:s})}).catch(console.error)):alert("Please enter your name")};return p?t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#f3f4f6"},children:[t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #d4c9b8",borderTopColor:"#00a544",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),t.jsx("p",{style:{color:"#6b5d52"},children:"Loading meeting..."})]}),t.jsx("style",{children:"\n          @keyframes spin {\n            to { transform: rotate(360deg); }\n          }\n        "})]}):o?l?t.jsx(i,{meetingCode:o,userName:s,isModerator:"current-user-id"===(null==m?void 0:m.hostId),onLeave:()=>{fetch(`/api/meetings/${o}/leave`,{method:"POST"}).catch(console.error),a("/dashboard")}}):t.jsxs("div",{style:{maxWidth:"600px",margin:"4rem auto",padding:"2rem",backgroundColor:"#fff",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[t.jsx("h1",{style:{marginBottom:"0.5rem"},children:(null==m?void 0:m.title)||"Join Meeting"}),t.jsxs("p",{style:{color:"#6b5d52",marginBottom:"2rem"},children:["Meeting code: ",t.jsx("strong",{children:o})]}),m&&t.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f3f4f6",borderRadius:"0.375rem",marginBottom:"2rem"},children:[t.jsxs("p",{style:{margin:"0.25rem 0",fontSize:"0.875rem"},children:[t.jsx("strong",{children:"Host:"})," ",m.hostName||"Unknown"]}),t.jsxs("p",{style:{margin:"0.25rem 0",fontSize:"0.875rem"},children:[t.jsx("strong",{children:"Scheduled:"})," ",new Date(m.scheduledAt).toLocaleString()]}),t.jsxs("p",{style:{margin:"0.25rem 0",fontSize:"0.875rem"},children:[t.jsx("strong",{children:"Duration:"})," ",m.duration," minutes"]})]}),t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#4a3728"},children:"Your Name"}),t.jsx("input",{type:"text","aria-label":"text input",value:s,onChange:e=>d(e.target.value),placeholder:"Enter your name",style:{width:"100%",padding:"0.75rem",border:"1px solid #c4b5a0",borderRadius:"0.375rem",fontSize:"1rem"},onKeyPress:e=>{"Enter"===e.key&&h()}})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox","aria-label":"checkbox input",defaultChecked:!0}),t.jsx("span",{style:{fontSize:"0.875rem"},children:"Camera on"})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox","aria-label":"checkbox input",defaultChecked:!0}),t.jsx("span",{style:{fontSize:"0.875rem"},children:"Microphone on"})]})]}),t.jsx("button",{onClick:h,style:{width:"100%",padding:"0.75rem",backgroundColor:"#00a544",color:"#fff",border:"none",borderRadius:"0.375rem",fontSize:"1rem",cursor:"pointer",fontWeight:"500"},children:"Join Meeting"}),t.jsx("button",{onClick:()=>a("/dashboard"),style:{width:"100%",padding:"0.75rem",backgroundColor:"transparent",color:"#6b5d52",border:"none",borderRadius:"0.375rem",fontSize:"0.875rem",cursor:"pointer",marginTop:"0.5rem"},children:"Cancel"})]}):t.jsxs("div",{style:{maxWidth:"600px",margin:"4rem auto",padding:"2rem",backgroundColor:"#fff",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[t.jsx("h1",{style:{marginBottom:"1rem"},children:"Join a Meeting"}),t.jsx("p",{style:{color:"#6b5d52",marginBottom:"2rem"},children:"Enter a meeting code to join"}),t.jsx("input",{type:"text","aria-label":"text input",placeholder:"Meeting code",style:{width:"100%",padding:"0.75rem",border:"1px solid #c4b5a0",borderRadius:"0.375rem",fontSize:"1rem",marginBottom:"1rem"},onKeyPress:e=>{"Enter"===e.key&&e.target.value&&a(`/meet/${e.target.value}`)}}),t.jsx("button",{onClick:()=>{const e=document.querySelector("input").value;e&&a(`/meet/${e}`)},style:{width:"100%",padding:"0.75rem",backgroundColor:"#00a544",color:"#fff",border:"none",borderRadius:"0.375rem",fontSize:"1rem",cursor:"pointer",fontWeight:"500"},children:"Join Meeting"})]})}export{a as VideoMeeting,a as default};
