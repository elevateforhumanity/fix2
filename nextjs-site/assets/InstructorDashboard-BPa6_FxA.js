import{r as s,j as e}from"./vendor-react-mXmGo1rS.js";import{L as t}from"./vendor-router-umqT_8ks.js";import{s as r}from"./supa-BrS98-L_.js";import"./vendor-BU8AdXDg.js";import"./vendor-supabase-BOQaJsF3.js";function d(){const[d,n]=s.useState([]),[a,l]=s.useState({courses:0,lessons:0,students:0});return s.useEffect(()=>{!async function(){const{data:s}=await r.from("courses").select("*, lessons(count)").order("title");n(s||[]);const e=null==s?void 0:s.reduce((s,e)=>{var t,r;return s+((null==(r=null==(t=e.lessons)?void 0:t[0])?void 0:r.count)||0)},0),t=(null==s?void 0:s.map(s=>s.id))||[];let d=0;if(t.length>0){const{data:s}=await r.from("enrollments").select("user_id").in("course_id",t);d=new Set((null==s?void 0:s.map(s=>s.user_id))||[]).size}l({courses:(null==s?void 0:s.length)||0,lessons:e||0,students:d})}()},[]),e.jsx("section",{className:"section",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Instructor Dashboard"}),e.jsx("p",{className:"mt-2 text-brand-text-muted",children:"Manage your courses and lessons"})]}),e.jsx(t,{to:"/instructor/course/new",className:"btn",children:"+ New Course"})]}),e.jsxs("div",{className:"mt-8 grid gap-6 sm:grid-cols-3",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"text-3xl font-extrabold text-brand-600",children:a.courses}),e.jsx("div",{className:"mt-1 text-brand-text-muted",children:"Courses"})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"text-3xl font-extrabold text-brand-600",children:a.lessons}),e.jsx("div",{className:"mt-1 text-brand-text-muted",children:"Lessons"})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"text-3xl font-extrabold text-brand-600",children:a.students}),e.jsx("div",{className:"mt-1 text-brand-text-muted",children:"Students"})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Your Courses"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[d.map(s=>{var r,d;return e.jsxs("div",{className:"card p-5 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-brand-text-light",children:s.code}),e.jsx("div",{className:"font-semibold",children:s.title}),e.jsxs("div",{className:"mt-1 text-sm text-brand-text-muted",children:[(null==(d=null==(r=s.lessons)?void 0:r[0])?void 0:d.count)||0," lessons"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{to:`/instructor/course/${s.id}/edit`,className:"btn-outline",children:"Edit"}),e.jsx(t,{to:`/instructor/course/${s.id}/lessons`,className:"btn",children:"Lessons"})]})]},s.id)}),0===d.length&&e.jsx("div",{className:"card p-6 text-center text-brand-text-muted",children:"No courses yet. Create your first course to get started!"})]})]})]})})}export{d as default};
