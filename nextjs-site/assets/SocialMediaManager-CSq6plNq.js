var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{r as s,j as a}from"./vendor-react-mXmGo1rS.js";import{A as n}from"./AppLayout-C3pbRaS2.js";import"./vendor-BU8AdXDg.js";import"./vendor-router-umqT_8ks.js";const r=new class{constructor(){t(this,"webhookUrls"),t(this,"apiKey"),this.webhookUrls=new Map([["facebook",""],["linkedin",""],["youtube",""],["all",""]]),this.apiKey=""}async postToPlatform(e,t,s){const a=this.webhookUrls.get(e);if(!a)return console.error(`[Zapier] No webhook URL configured for ${e}`),{success:!1,error:`No webhook URL configured for ${e}`};const n={platform:e,content:t,mediaUrl:null==s?void 0:s.mediaUrl,scheduledTime:null==s?void 0:s.scheduledTime,metadata:null==s?void 0:s.metadata};try{console.log(`[Zapier] Posting to ${e}...`);const t=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",...this.apiKey&&{"X-Zapier-API-Key":this.apiKey}},body:JSON.stringify(n)});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const s=await t.json();return console.log(`[Zapier] Successfully posted to ${e}`),{success:!0,zapId:s.id||s.zapId,message:`Posted to ${e} successfully`}}catch(r){return console.error(`[Zapier] Failed to post to ${e}:`,r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async postToAllPlatforms(e,t){const s=["facebook","linkedin","youtube"],a=this.webhookUrls.get("all");if(a){console.log("[Zapier] Using single webhook for all platforms");const n={platforms:s,content:e,mediaUrl:null==t?void 0:t.mediaUrl,scheduledTime:null==t?void 0:t.scheduledTime,metadata:null==t?void 0:t.metadata};try{const e=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",...this.apiKey&&{"X-Zapier-API-Key":this.apiKey}},body:JSON.stringify(n)});if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);const t=await e.json();return s.reduce((e,s)=>({...e,[s]:{success:!0,zapId:t.id||t.zapId,message:`Posted to ${s} successfully`}}),{})}catch(r){return console.error("[Zapier] Failed to post to all platforms:",r),s.reduce((e,t)=>({...e,[t]:{success:!1,error:r instanceof Error?r.message:"Unknown error"}}),{})}}console.log("[Zapier] Posting to each platform individually");const n=await Promise.all(s.map(s=>this.postToPlatform(s,e,t)));return s.reduce((e,t,s)=>({...e,[t]:n[s]}),{})}async announceNewProgram(e){const t=`ðŸŽ“ New Program Alert! ðŸŽ“\n\nWe're excited to announce: ${e.name}\n\n${e.description}\n\n${e.enrollmentUrl?`Enroll now: ${e.enrollmentUrl}`:"Contact us to learn more!"}\n\n#WorkforceDevelopment #Training #ElevateForHumanity`;return this.postToAllPlatforms(t,{mediaUrl:e.imageUrl,metadata:{programName:e.name,eventType:"program_announcement",tags:["program","announcement","enrollment"]}})}async postSuccessStory(e){const t=`ðŸŒŸ Success Story ðŸŒŸ\n\nCongratulations to ${e.studentName} for completing ${e.programName}!\n\n${e.achievement}\n\nWe're proud of your accomplishment! ðŸŽ‰\n\n#SuccessStory #WorkforceDevelopment #ElevateForHumanity`;return this.postToAllPlatforms(t,{mediaUrl:e.imageUrl,metadata:{programName:e.programName,eventType:"success_story",tags:["success","student","achievement"]}})}async announceEvent(e){const t=`ðŸ“… Upcoming Event ðŸ“…\n\n${e.name}\nDate: ${e.date}\n\n${e.description}\n\n${e.registrationUrl?`Register: ${e.registrationUrl}`:"Stay tuned for registration details!"}\n\n#Event #Community #ElevateForHumanity`;return this.postToAllPlatforms(t,{mediaUrl:e.imageUrl,scheduledTime:e.date,metadata:{eventName:e.name,eventType:"event_announcement",tags:["event","announcement","community"]}})}async postDailyMotivation(e,t){const s=`ðŸ’ª Daily Motivation ðŸ’ª\n\n"${e}"\n${t?`- ${t}`:""}\n\nKeep pushing forward! You've got this! ðŸš€\n\n#Motivation #Inspiration #ElevateForHumanity`;return this.postToAllPlatforms(s,{metadata:{eventType:"daily_motivation",tags:["motivation","inspiration","daily"]}})}async announcePartnership(e){const t=`ðŸ¤ Partnership Announcement ðŸ¤\n\nWe're thrilled to partner with ${e.name}!\n\n${e.description}\n\n${e.websiteUrl?`Learn more: ${e.websiteUrl}`:""}\n\nTogether, we're making a difference! ðŸ’™\n\n#Partnership #Collaboration #ElevateForHumanity`;return this.postToAllPlatforms(t,{mediaUrl:e.logoUrl,metadata:{partnerName:e.name,eventType:"partnership_announcement",tags:["partnership","announcement","collaboration"]}})}async schedulePost(e,t,s,a){return"all"===e?this.postToAllPlatforms(t,{...a,scheduledTime:s}):this.postToPlatform(e,t,{...a,scheduledTime:s})}async testConnection(e){const t=this.webhookUrls.get(e);if(!t)return console.error(`[Zapier] No webhook URL configured for ${e}`),!1;try{return(await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",...this.apiKey&&{"X-Zapier-API-Key":this.apiKey}},body:JSON.stringify({platform:e,content:"Test connection from Elevate for Humanity",metadata:{eventType:"test",test:!0}})})).ok}catch(s){return console.error(`[Zapier] Connection test failed for ${e}:`,s),!1}}getConfigurationStatus(){return{facebook:!!this.webhookUrls.get("facebook"),linkedin:!!this.webhookUrls.get("linkedin"),youtube:!!this.webhookUrls.get("youtube"),all:!!this.webhookUrls.get("all"),apiKey:!!this.apiKey}}};function o(){const[e,t]=s.useState("post"),[o,i]=s.useState(""),[l,d]=s.useState(""),[c,m]=s.useState(["facebook","linkedin","youtube"]),[u,b]=s.useState(""),[p,x]=s.useState(!1),[h,f]=s.useState(null),[g,y]=s.useState({});async function j(e){x(!0),f(null);try{let t;switch(e){case"program":t=await async function(e){return r.announceNewProgram(e)}({name:"Sample Program",description:"This is a sample program announcement",enrollmentUrl:"https://elevateforhumanity.org/programs"});break;case"success":t=await async function(e){return r.postSuccessStory(e)}({studentName:"John Doe",programName:"IT Certification",achievement:"Successfully completed the program and secured a job!"});break;case"event":t=await async function(e){return r.announceEvent(e)}({name:"Open House",date:new Date(Date.now()+6048e5).toLocaleDateString(),description:"Join us for an open house to learn about our programs!",registrationUrl:"https://elevateforhumanity.org/events"});break;case"motivation":t=await async function(e,t){return r.postDailyMotivation(e,t)}("The only way to do great work is to love what you do.","Steve Jobs");break;case"partnership":t=await async function(e){return r.announcePartnership(e)}({name:"Sample Partner",description:"We are excited to partner with this organization!",websiteUrl:"https://example.com"});break;default:return}f(t)}catch(t){console.error("Failed to post template:",t),alert("Failed to post template")}finally{x(!1)}}return s.useEffect(()=>{!function(){const e=r.getConfigurationStatus();y(e)}()},[]),a.jsx(n,{children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-brand-text",children:"Social Media Manager"}),a.jsx("p",{className:"mt-2 text-brand-text-muted",children:"Automate social media posts via Zapier integration"})]}),a.jsx("div",{className:"border-b border-brand-border mb-6",children:a.jsxs("nav",{role:"navigation",className:"-mb-px flex space-x-8",children:[a.jsx("button",{onClick:()=>t("post"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("post"===e?"border-blue-500 text-brand-info":"border-transparent text-brand-text-light hover:text-brand-text hover:border-brand-border-dark"),children:"Create Post"}),a.jsx("button",{onClick:()=>t("templates"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("templates"===e?"border-blue-500 text-brand-info":"border-transparent text-brand-text-light hover:text-brand-text hover:border-brand-border-dark"),children:"Templates"}),a.jsx("button",{onClick:()=>t("status"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("status"===e?"border-blue-500 text-brand-info":"border-transparent text-brand-text-light hover:text-brand-text hover:border-brand-border-dark"),children:"Configuration"})]})}),"post"===e&&a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-brand-text mb-4",children:"Create New Post"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Select Platforms"}),a.jsx("div",{className:"flex space-x-4",children:["facebook","linkedin","youtube"].map(e=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox","aria-label":"checkbox input",checked:c.includes(e),onChange:()=>function(e){c.includes(e)?m(c.filter(t=>t!==e)):m([...c,e])}(e),className:"h-4 w-4 text-brand-info focus:ring-brand-focus border-brand-border-dark rounded"}),a.jsx("span",{className:"ml-2 text-sm text-brand-text capitalize",children:e})]},e))})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Post Content"}),a.jsx("textarea",{value:o,onChange:e=>i(e.target.value),rows:6,className:"w-full px-3 py-2 border border-brand-border-dark rounded-md focus:outline-none focus:ring-2 focus:ring-brand-focus",placeholder:"What would you like to share?"}),a.jsxs("p",{className:"mt-1 text-sm text-brand-text-light",children:[o.length," characters"]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Media URL (Optional)"}),a.jsx("input",{type:"url","aria-label":"url input",value:l,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-brand-border-dark rounded-md focus:outline-none focus:ring-2 focus:ring-brand-focus",placeholder:"https://example.com/image.jpg"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Schedule for Later (Optional)"}),a.jsx("input",{type:"datetime-local","aria-label":"datetime-local input",value:u,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-brand-border-dark rounded-md focus:outline-none focus:ring-2 focus:ring-brand-focus"})]}),a.jsx("button",{onClick:async function(){if(o.trim()){x(!0),f(null);try{const e=c,t=await async function(e,t){if((null==t?void 0:t.platforms)&&1===t.platforms.length){const s=await r.postToPlatform(t.platforms[0],e,t);return{[t.platforms[0]]:s}}return r.postToAllPlatforms(e,t)}(o,{platforms:e,mediaUrl:l||void 0,scheduledTime:u||void 0});f(t),Object.values(t).every(e=>e.success)&&(i(""),d(""),b(""))}catch(e){console.error("Failed to post:",e),alert("Failed to post to social media")}finally{x(!1)}}else alert("Please enter content to post")},disabled:p||0===c.length,className:"w-full bg-brand-info text-white py-3 px-4 rounded-md hover:bg-brand-info-hover disabled:bg-gray-400 disabled:cursor-not-allowed font-medium",children:p?"Posting...":u?"Schedule Post":"Post Now"}),h&&a.jsxs("div",{className:"mt-6 p-4 bg-brand-surface rounded-md",children:[a.jsx("h3",{className:"font-semibold text-brand-text mb-2",children:"Post Results:"}),Object.entries(h).map(([e,t])=>a.jsxs("div",{className:"flex items-center justify-between py-2",children:[a.jsxs("span",{className:"capitalize text-brand-text",children:[e,":"]}),a.jsx("span",{className:"font-medium "+(t.success?"text-brand-success":"text-red-600"),children:t.success?"âœ“ Success":`âœ— ${t.error}`})]},e))]})]}),"templates"===e&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-brand-text mb-2",children:"Program Announcement"}),a.jsx("p",{className:"text-sm text-brand-text-muted mb-4",children:"Announce a new training program or course"}),a.jsx("button",{onClick:()=>j("program"),disabled:p,className:"w-full bg-brand-info text-white py-2 px-4 rounded-md hover:bg-brand-info-hover disabled:bg-gray-400",children:"Use Template"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-brand-text mb-2",children:"Success Story"}),a.jsx("p",{className:"text-sm text-brand-text-muted mb-4",children:"Share a student achievement or success story"}),a.jsx("button",{onClick:()=>j("success"),disabled:p,className:"w-full bg-brand-success text-white py-2 px-4 rounded-md hover:bg-brand-success-hover disabled:bg-gray-400",children:"Use Template"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-brand-text mb-2",children:"Event Announcement"}),a.jsx("p",{className:"text-sm text-brand-text-muted mb-4",children:"Promote an upcoming event or webinar"}),a.jsx("button",{onClick:()=>j("event"),disabled:p,className:"w-full bg-brand-secondary text-white py-2 px-4 rounded-md hover:bg-brand-secondary-hover disabled:bg-gray-400",children:"Use Template"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-brand-text mb-2",children:"Daily Motivation"}),a.jsx("p",{className:"text-sm text-brand-text-muted mb-4",children:"Share an inspirational quote or message"}),a.jsx("button",{onClick:()=>j("motivation"),disabled:p,className:"w-full bg-yellow-600 text-white py-2 px-4 rounded-md hover:bg-yellow-700 disabled:bg-gray-400",children:"Use Template"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-brand-text mb-2",children:"Partnership Announcement"}),a.jsx("p",{className:"text-sm text-brand-text-muted mb-4",children:"Announce a new partnership or collaboration"}),a.jsx("button",{onClick:()=>j("partnership"),disabled:p,className:"w-full bg-brand-info text-white py-2 px-4 rounded-md hover:bg-brand-info-hover disabled:bg-gray-400",children:"Use Template"})]}),h&&a.jsxs("div",{className:"md:col-span-2 bg-brand-surface rounded-lg p-6",children:[a.jsx("h3",{className:"font-semibold text-brand-text mb-4",children:"Template Post Results:"}),Object.entries(h).map(([e,t])=>a.jsxs("div",{className:"flex items-center justify-between py-2",children:[a.jsxs("span",{className:"capitalize text-brand-text",children:[e,":"]}),a.jsx("span",{className:"font-medium "+(t.success?"text-brand-success":"text-red-600"),children:t.success?"âœ“ Success":`âœ— ${t.error}`})]},e))]})]}),"status"===e&&a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-brand-text mb-4",children:"Zapier Configuration Status"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-brand-surface rounded-md",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-brand-text",children:"Facebook"}),a.jsx("p",{className:"text-sm text-brand-text-muted",children:"Webhook configuration"})]}),a.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+(g.facebook?"bg-brand-surface text-brand-success":"bg-brand-surface text-red-800"),children:g.facebook?"Configured":"Not Configured"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-brand-surface rounded-md",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-brand-text",children:"LinkedIn"}),a.jsx("p",{className:"text-sm text-brand-text-muted",children:"Webhook configuration"})]}),a.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+(g.linkedin?"bg-brand-surface text-brand-success":"bg-brand-surface text-red-800"),children:g.linkedin?"Configured":"Not Configured"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-brand-surface rounded-md",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-brand-text",children:"YouTube"}),a.jsx("p",{className:"text-sm text-brand-text-muted",children:"Webhook configuration"})]}),a.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+(g.youtube?"bg-brand-surface text-brand-success":"bg-brand-surface text-red-800"),children:g.youtube?"Configured":"Not Configured"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-brand-surface rounded-md",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-brand-text",children:"All Platforms (Single Webhook)"}),a.jsx("p",{className:"text-sm text-brand-text-muted",children:"Optional unified webhook"})]}),a.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+(g.all?"bg-brand-surface text-brand-success":"bg-brand-surface-dark text-brand-text"),children:g.all?"Configured":"Optional"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-brand-surface rounded-md",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-brand-text",children:"Zapier API Key"}),a.jsx("p",{className:"text-sm text-brand-text-muted",children:"Optional authentication"})]}),a.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+(g.apiKey?"bg-brand-surface text-brand-success":"bg-brand-surface-dark text-brand-text"),children:g.apiKey?"Configured":"Optional"})]})]}),a.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Setup Instructions"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-brand-info",children:[a.jsx("li",{children:"Create Zaps in Zapier for each platform (Facebook, LinkedIn, YouTube)"}),a.jsx("li",{children:'Use "Webhooks by Zapier" as the trigger'}),a.jsx("li",{children:"Copy the webhook URLs from Zapier"}),a.jsxs("li",{children:["Add webhook URLs to your environment variables:",a.jsxs("ul",{className:"list-disc list-inside ml-6 mt-2 space-y-1",children:[a.jsx("li",{children:"VITE_ZAPIER_FACEBOOK_WEBHOOK"}),a.jsx("li",{children:"VITE_ZAPIER_LINKEDIN_WEBHOOK"}),a.jsx("li",{children:"VITE_ZAPIER_YOUTUBE_WEBHOOK"}),a.jsx("li",{children:"VITE_ZAPIER_ALL_PLATFORMS_WEBHOOK (optional)"}),a.jsx("li",{children:"VITE_ZAPIER_API_KEY (optional)"})]})]}),a.jsx("li",{children:"Configure Zapier actions to post to respective platforms"}),a.jsx("li",{children:"Test the integration using the templates"})]})]})]})]})})}export{o as default};
