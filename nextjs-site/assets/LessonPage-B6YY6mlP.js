import{r as s,j as e}from"./vendor-react-mXmGo1rS.js";import{u as l,L as a}from"./vendor-router-umqT_8ks.js";import{c as t,a as i,u as d}from"./courses-BIxL_T-I.js";import c from"./QuizBlock-D9bGNeq-.js";import"./vendor-BU8AdXDg.js";import"./supa-BrS98-L_.js";import"./vendor-supabase-BOQaJsF3.js";function r(){const{lessonId:r}=l(),[n,o]=s.useState(null),[m,x]=s.useState([]);if(s.useEffect(()=>{r&&(async()=>{const s=await t(r);o(s);const e=await i(s.course_id);x(e),d(s.id,100).catch(()=>{})})()},[r]),!n)return e.jsx("div",{className:"section",children:e.jsx("div",{className:"container max-w-2xl mx-auto",children:e.jsxs("div",{className:"card p-8 text-center",children:[e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-slate-200 rounded w-3/4 mx-auto mb-4"}),e.jsx("div",{className:"h-64 bg-slate-200 rounded mx-auto mb-4"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-5/6 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-4/6"})]}),e.jsx("p",{className:"mt-4 text-brand-text-muted",children:"Loading lesson content..."})]})})});const u=m.findIndex(s=>s.id===n.id),h=u>0?m[u-1]:null,j=u>=0&&u<m.length-1?m[u+1]:null;return e.jsx("section",{className:"section",children:e.jsxs("div",{className:"container grid lg:grid-cols-[1fr_320px] gap-10",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs text-brand-text-light",children:["Lesson ",n.idx]}),e.jsx("h1",{className:"text-2xl font-bold",children:n.title}),n.video_url&&e.jsx("div",{className:"mt-4 aspect-video card overflow-hidden",children:e.jsx("iframe",{src:n.video_url,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})}),n.html&&e.jsx("article",{className:"prose mt-6",dangerouslySetInnerHTML:{__html:n.html}}),e.jsx(c,{lessonId:n.id}),e.jsxs("div",{className:"mt-8 flex gap-3",children:[h&&e.jsxs(a,{to:`/lms/lesson/${h.id}`,className:"btn-outline",children:["← ",h.title]}),j&&e.jsxs(a,{to:`/lms/lesson/${j.id}`,className:"btn",children:[j.title," →"]})]})]}),e.jsxs("aside",{className:"card p-4",children:[e.jsx("div",{className:"font-semibold",children:"Lessons"}),e.jsx("ol",{className:"mt-2 space-y-2 list-decimal list-inside text-sm",children:m.map(s=>e.jsx("li",{className:s.id===n.id?"font-semibold":"",children:e.jsx(a,{to:`/lms/lesson/${s.id}`,children:s.title})},s.id))})]})]})})}export{r as default};
